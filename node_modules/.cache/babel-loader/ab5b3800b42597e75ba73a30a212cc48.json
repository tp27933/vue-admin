{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\deposit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\deposit.vue","mtime":1595920934952},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCBjb21wdXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdkZXBvc2l0JywKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcCwgY29udGV4dCkgewogICAgdmFyIG9wdGlvbiA9IHJlZign5YSy5YC8Jyk7CiAgICB2YXIgZGlhbG9nRm9ybVZpc2libGUgPSByZWYoZmFsc2UpOwogICAgdmFyIGZvcm1MYWJlbFdpZHRoID0gJzEyMHB4JzsKICAgIHZhciBkeW5hbWljVmFsaWRhdGVGb3JtID0gcmVhY3RpdmUoewogICAgICBkb21haW5zOiBbewogICAgICAgIHZhbHVlOiAnJywKICAgICAgICBhbW91bnQ6ICcnCiAgICAgIH1dLAogICAgICBkZXBvc2l0QW1vdW50OiAnJywKICAgICAgdHlwZTogJ+WEsuWAvCcKICAgIH0pOwogICAgdmFyIGRlcG9zaXRUb3RhbCA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGlzTmFOKGR5bmFtaWNWYWxpZGF0ZUZvcm0uZGVwb3NpdEFtb3VudCkpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZHluYW1pY1ZhbGlkYXRlRm9ybS5kZXBvc2l0QW1vdW50OwogICAgICB9CiAgICB9KTsKICAgIHZhciB3aXRoZHJhd1RvdGFsID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLnJlZHVjZShmdW5jdGlvbiAocHJlLCBjdXIpIHsKICAgICAgICBpZiAoaXNOYU4oY3VyLmFtb3VudCkpIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcHJlICsgY3VyLmFtb3VudDsKICAgICAgICB9CiAgICAgIH0sIDApOwogICAgfSk7CgogICAgdmFyIHJlbW92ZURvbWFpbiA9IGZ1bmN0aW9uIHJlbW92ZURvbWFpbihpdGVtKSB7CiAgICAgIHZhciBpbmRleCA9IGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucy5pbmRleE9mKGl0ZW0pOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CiAgICB9OwoKICAgIHZhciBhZGREb21haW4gPSBmdW5jdGlvbiBhZGREb21haW4oKSB7CiAgICAgIGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucy5wdXNoKHsKICAgICAgICB2YWx1ZTogJycsCiAgICAgICAga2V5OiBEYXRlLm5vdygpLAogICAgICAgIGFtb3VudDogJycKICAgICAgfSk7CiAgICB9OwoKICAgIHZhciB0b2dnbGVNZW51ID0gZnVuY3Rpb24gdG9nZ2xlTWVudSgpIHsKICAgICAgY29uc29sZS5sb2coJ2NoYW5nZScpOwogICAgICBvcHRpb24udmFsdWUgPSBkeW5hbWljVmFsaWRhdGVGb3JtLnR5cGU7CiAgICAgIGNvbnRleHQucmVmc1snZHluYW1pY1ZhbGlkYXRlRm9ybSddLnJlc2V0RmllbGRzKCk7CiAgICAgIGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucy5zcGxpY2UoMSwgZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLmxlbmd0aCAtIDEpOwogICAgICBjb25zb2xlLmxvZyhkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMubGVuZ3RoKTsKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgb3B0aW9uOiBvcHRpb24sCiAgICAgIHRvZ2dsZU1lbnU6IHRvZ2dsZU1lbnUsCiAgICAgIGRlcG9zaXRUb3RhbDogZGVwb3NpdFRvdGFsLAogICAgICB3aXRoZHJhd1RvdGFsOiB3aXRoZHJhd1RvdGFsLAogICAgICByZW1vdmVEb21haW46IHJlbW92ZURvbWFpbiwKICAgICAgZHluYW1pY1ZhbGlkYXRlRm9ybTogZHluYW1pY1ZhbGlkYXRlRm9ybSwKICAgICAgYWRkRG9tYWluOiBhZGREb21haW4sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBkaWFsb2dGb3JtVmlzaWJsZSwKICAgICAgZm9ybUxhYmVsV2lkdGg6IGZvcm1MYWJlbFdpZHRoCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["deposit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA,SAAA,QAAA,EAAA,GAAA,EAAA,QAAA,QAAA,sBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,KAFA,iBAEA,IAFA,EAEA,OAFA,EAEA;AACA,QAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA;AACA,QAAA,iBAAA,GAAA,GAAA,CAAA,KAAA,CAAA;AACA,QAAA,cAAA,GAAA,OAAA;AACA,QAAA,mBAAA,GAAA,QAAA,CAAA;AACA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA;AAFA,OADA,CADA;AAOA,MAAA,aAAA,EAAA,EAPA;AAQA,MAAA,IAAA,EAAA;AARA,KAAA,CAAA;AAWA,QAAA,YAAA,GAAA,QAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,mBAAA,CAAA,aAAA,CAAA,EAAA;AACA,eAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,mBAAA,CAAA,aAAA;AACA;AACA,KANA,CAAA;AAQA,QAAA,aAAA,GAAA,QAAA,CAAA,YAAA;AACA,aAAA,mBAAA,CAAA,OAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA,GAAA,CAAA,MAAA,CAAA,EAAA;AACA,iBAAA,CAAA;AACA,SAFA,MAEA;AACA,iBAAA,GAAA,GAAA,GAAA,CAAA,MAAA;AACA;AACA,OANA,EAMA,CANA,CAAA;AAOA,KARA,CAAA;;AAUA,QAAA,YAAA,GAAA,SAAA,YAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,GAAA,mBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,IAAA,CAAA;;AACA,UAAA,KAAA,KAAA,CAAA,CAAA,EAAA;AACA,QAAA,mBAAA,CAAA,OAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA;AACA,KALA;;AAMA,QAAA,SAAA,GAAA,SAAA,SAAA,GAAA;AACA,MAAA,mBAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,GAAA,EAAA,IAAA,CAAA,GAAA,EAFA;AAGA,QAAA,MAAA,EAAA;AAHA,OAAA;AAKA,KANA;;AAQA,QAAA,UAAA,GAAA,SAAA,UAAA,GAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,MAAA,MAAA,CAAA,KAAA,GAAA,mBAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,IAAA,CAAA,qBAAA,EAAA,WAAA;AACA,MAAA,mBAAA,CAAA,OAAA,CAAA,MAAA,CACA,CADA,EAEA,mBAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAFA;AAIA,MAAA,OAAA,CAAA,GAAA,CAAA,mBAAA,CAAA,OAAA,CAAA,MAAA;AACA,KATA;;AAUA,WAAA;AACA,MAAA,MAAA,EAAA,MADA;AAEA,MAAA,UAAA,EAAA,UAFA;AAGA,MAAA,YAAA,EAAA,YAHA;AAIA,MAAA,aAAA,EAAA,aAJA;AAKA,MAAA,YAAA,EAAA,YALA;AAMA,MAAA,mBAAA,EAAA,mBANA;AAOA,MAAA,SAAA,EAAA,SAPA;AAQA,MAAA,iBAAA,EAAA,iBARA;AASA,MAAA,cAAA,EAAA;AATA,KAAA;AAWA;AAtEA,CAAA","sourcesContent":["<template>\r\n  <div id=\"deposit\">\r\n    <el-dialog title=\"金額操作\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form\r\n        :model=\"dynamicValidateForm\"\r\n        ref=\"dynamicValidateForm\"\r\n        label-width=\"120px\"\r\n        class=\"demo-dynamic\"\r\n      >\r\n        <el-form-item label=\"操作\">\r\n          <el-radio-group\r\n            v-model=\"dynamicValidateForm.type\"\r\n            placeholder=\"請選擇操作方式\"\r\n            size=\"medium\"\r\n            @change=\"toggleMenu\"\r\n          >\r\n            <el-radio label=\"儲值\"></el-radio>\r\n            <el-radio label=\"扣款\"></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <div class=\"deposit\" v-if=\"option === '儲值'\">\r\n          <el-form-item\r\n            label=\"金額\"\r\n            prop=\"depositAmount\"\r\n            :rules=\"[\r\n              { required: true, message: '年龄不能为空' },{ type: 'number', message: '年龄必须为数字值' },\r\n            ]\"\r\n          >\r\n            <el-input\r\n              v-model.number=\"dynamicValidateForm.depositAmount\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <h2 class=\"fixbug\">總金額 :{{ depositTotal }}</h2>\r\n        </div>\r\n\r\n        <div class=\"withdraw\" v-else>\r\n          <el-form-item\r\n            v-for=\"(domain, index) in dynamicValidateForm.domains\"\r\n            label=\"金額\"\r\n            :key=\"domain.key\"\r\n            :prop=\"'domains.' + index + '.value'\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '域名不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n          >\r\n            <el-form-item\r\n              :prop=\"'domains.' + index + '.amount'\"\r\n              :rules=\"[\r\n                { required: true, message: '请输入金額', trigger: 'blur' },\r\n                {\r\n                  type: 'number',\r\n                  message: '请输入數字類型',\r\n                  trigger: ['blur', 'change'],\r\n                },\r\n              ]\"\r\n              class=\"floatL\"\r\n            >\r\n              <el-input\r\n                v-model.number=\"dynamicValidateForm.domains[index].amount\"\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-select\r\n              v-model=\"dynamicValidateForm.domains[index].value\"\r\n              placeholder=\"請選擇消費類型\"\r\n              class=\"floatL\"\r\n              popper-class=\"typeOptions\"\r\n              :popper-append-to-body=\"false\"\r\n            >\r\n              <el-option label=\"剪髮\" value=\"haircut\"></el-option>\r\n              <el-option label=\"燙髮\" value=\"color \"></el-option>\r\n              <el-option label=\"染髮\" value=\"perm \"></el-option>\r\n              <el-option label=\"護髮\" value=\"treatment \"></el-option>\r\n              <el-option label=\"其他\" value=\"others \"></el-option>\r\n            </el-select>\r\n            <el-button @click=\"addDomain\">新增項目</el-button>\r\n            <el-button @click.prevent=\"removeDomain(domain)\">删除</el-button>\r\n\r\n            <h2>總金額 :{{ withdrawTotal }}</h2>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormVisible = false\">\r\n          确 定\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, computed } from '@vue/composition-api'\r\nexport default {\r\n  name: 'deposit',\r\n  setup(prop, context) {\r\n    const option = ref('儲值')\r\n    const dialogFormVisible = ref(false)\r\n    const formLabelWidth = '120px'\r\n    const dynamicValidateForm = reactive({\r\n      domains: [\r\n        {\r\n          value: '',\r\n          amount: '',\r\n        },\r\n      ],\r\n      depositAmount: '',\r\n      type: '儲值',\r\n    })\r\n\r\n    const depositTotal = computed(() => {\r\n      if (isNaN(dynamicValidateForm.depositAmount)) {\r\n        return 0\r\n      } else {\r\n        return dynamicValidateForm.depositAmount\r\n      }\r\n    })\r\n\r\n    const withdrawTotal = computed(() => {\r\n      return dynamicValidateForm.domains.reduce((pre, cur) => {\r\n        if (isNaN(cur.amount)) {\r\n          return 0\r\n        } else {\r\n          return pre + cur.amount\r\n        }\r\n      }, 0)\r\n    })\r\n\r\n    const removeDomain = (item) => {\r\n      var index = dynamicValidateForm.domains.indexOf(item)\r\n      if (index !== -1) {\r\n        dynamicValidateForm.domains.splice(index, 1)\r\n      }\r\n    }\r\n    const addDomain = () => {\r\n      dynamicValidateForm.domains.push({\r\n        value: '',\r\n        key: Date.now(),\r\n        amount: '',\r\n      })\r\n    }\r\n\r\n    const toggleMenu = () => {\r\n      console.log('change')\r\n      option.value = dynamicValidateForm.type\r\n      context.refs['dynamicValidateForm'].resetFields()\r\n      dynamicValidateForm.domains.splice(\r\n        1,\r\n        dynamicValidateForm.domains.length - 1,\r\n      )\r\n      console.log(dynamicValidateForm.domains.length)\r\n    }\r\n    return {\r\n      option,\r\n      toggleMenu,\r\n      depositTotal,\r\n      withdrawTotal,\r\n      removeDomain,\r\n      dynamicValidateForm,\r\n      addDomain,\r\n      dialogFormVisible,\r\n      formLabelWidth,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-form-item__error {\r\n  top: 60%;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/member/operation/Components/components_Tabs"}]}