{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\store\\modules\\app.js","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\store\\modules\\app.js","mtime":1603995820424},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgeyBMb2dpbiB9IGZyb20gJ0AvYXBpL2xvZ2luLmpzJzsKaW1wb3J0IHsgc2V0VG9rZW4sIHNldFVzZXJOYW1lLCBnZXRVc2VyTmFtZSwgcmVtb3ZlVG9rZW4sIHJlbW92ZVVzZXJOYW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvZ2V0VG9rZW4nOwp2YXIgc3RhdGUgPSB7CiAgaXNDb2xsYXBzZTogSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdpc0NvbGxhcHNlJykpIHx8IGZhbHNlLAogIHRva2VuOiAnJywKICBuYW1lOiBnZXRVc2VyTmFtZSgpIHx8ICcnCn07CnZhciBnZXR0ZXJzID0gewogIGlzQ29sbGFwc2U6IGZ1bmN0aW9uIGlzQ29sbGFwc2Uoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pc0NvbGxhcHNlOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfQ09MTEFQU0U6IGZ1bmN0aW9uIFNFVF9DT0xMQVBTRShzdGF0ZSwgdmFsdWUpIHsKICAgIHN0YXRlLmlzQ29sbGFwc2UgPSAhc3RhdGUuaXNDb2xsYXBzZTsgLy9odG1sNSDmnKzlnLDlhLLlrZgKCiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdpc0NvbGxhcHNlJywgSlNPTi5zdHJpbmdpZnkoc3RhdGUuaXNDb2xsYXBzZSkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHZhbHVlKSB7CiAgICBzdGF0ZS50b2tlbiA9IHZhbHVlOwogIH0sCiAgU0VUX1VTRVJOQU1FOiBmdW5jdGlvbiBTRVRfVVNFUk5BTUUoc2F0ZSwgdmFsdWUpIHsKICAgIHN0YXRlLm5hbWUgPSB2YWx1ZTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCByZXF1ZXN0RGF0YSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWpjZXQpIHsKICAgICAgTG9naW4ocmVxdWVzdERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSTkFNRScsIGRhdGEudXNlcm5hbWUpOwogICAgICAgIHNldFRva2VuKGRhdGEudG9rZW4pOwogICAgICAgIHNldFVzZXJOYW1lKGRhdGEudXNlcm5hbWUpOwogICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWpjZXQoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamNldCkgewogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZW1vdmVVc2VyTmFtZSgpOwogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfVVNFUk5BTUUnLCAnJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["C:/Users/missj/OneDrive/桌面/vue/vue-admin/src/store/modules/app.js"],"names":["Login","setToken","setUserName","getUserName","removeToken","removeUserName","state","isCollapse","JSON","parse","sessionStorage","getItem","token","name","getters","mutations","SET_COLLAPSE","value","setItem","stringify","SET_TOKEN","SET_USERNAME","sate","actions","login","requestData","commit","Promise","resolve","rejcet","then","response","data","username","catch","error","logout","namespaced"],"mappings":";;AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,SACEC,QADF,EAEEC,WAFF,EAGEC,WAHF,EAIEC,WAJF,EAKEC,cALF,QAMO,sBANP;AAOA,IAAMC,KAAK,GAAG;AACZC,EAAAA,UAAU,EAAEC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,YAAvB,CAAX,KAAoD,KADpD;AAEZC,EAAAA,KAAK,EAAE,EAFK;AAGZC,EAAAA,IAAI,EAAEV,WAAW,MAAM;AAHX,CAAd;AAKA,IAAMW,OAAO,GAAG;AACdP,EAAAA,UAAU,EAAE,oBAAAD,KAAK;AAAA,WAAIA,KAAK,CAACC,UAAV;AAAA;AADH,CAAhB;AAGA,IAAMQ,SAAS,GAAG;AAChBC,EAAAA,YADgB,wBACHV,KADG,EACIW,KADJ,EACW;AACzBX,IAAAA,KAAK,CAACC,UAAN,GAAmB,CAACD,KAAK,CAACC,UAA1B,CADyB,CAEzB;;AACAG,IAAAA,cAAc,CAACQ,OAAf,CAAuB,YAAvB,EAAqCV,IAAI,CAACW,SAAL,CAAeb,KAAK,CAACC,UAArB,CAArC;AACD,GALe;AAMhBa,EAAAA,SANgB,qBAMNd,KANM,EAMCW,KAND,EAMQ;AACtBX,IAAAA,KAAK,CAACM,KAAN,GAAcK,KAAd;AACD,GARe;AAShBI,EAAAA,YATgB,wBASHC,IATG,EASGL,KATH,EASU;AACxBX,IAAAA,KAAK,CAACO,IAAN,GAAaI,KAAb;AACD;AAXe,CAAlB;AAaA,IAAMM,OAAO,GAAG;AACdC,EAAAA,KADc,uBACIC,WADJ,EACiB;AAAA,QAAvBC,MAAuB,QAAvBA,MAAuB;AAC7B,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC7B,MAAAA,KAAK,CAACyB,WAAD,CAAL,CACGK,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,YAAIC,IAAI,GAAGD,QAAQ,CAACC,IAAT,CAAcA,IAAzB;AAEAN,QAAAA,MAAM,CAAC,WAAD,EAAcM,IAAI,CAACpB,KAAnB,CAAN;AAEAc,QAAAA,MAAM,CAAC,cAAD,EAAiBM,IAAI,CAACC,QAAtB,CAAN;AAEAhC,QAAAA,QAAQ,CAAC+B,IAAI,CAACpB,KAAN,CAAR;AAEAV,QAAAA,WAAW,CAAC8B,IAAI,CAACC,QAAN,CAAX;AAEAL,QAAAA,OAAO,CAACG,QAAD,CAAP;AACD,OAbH,EAcGG,KAdH,CAcS,UAAAC,KAAK,EAAI;AACdN,QAAAA,MAAM,CAACM,KAAD,CAAN;AACD,OAhBH;AAiBD,KAlBM,CAAP;AAmBD,GArBa;AAsBdC,EAAAA,MAtBc,yBAsBK;AAAA,QAAVV,MAAU,SAAVA,MAAU;AACjB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCzB,MAAAA,WAAW;AACXC,MAAAA,cAAc;AACdqB,MAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,CAAN;AACAA,MAAAA,MAAM,CAAC,cAAD,EAAiB,EAAjB,CAAN;AACAE,MAAAA,OAAO;AACR,KANM,CAAP;AAOD;AA9Ba,CAAhB;AAgCA,eAAe;AACbS,EAAAA,UAAU,EAAE,IADC;AAEb/B,EAAAA,KAAK,EAALA,KAFa;AAGbQ,EAAAA,OAAO,EAAPA,OAHa;AAIbC,EAAAA,SAAS,EAATA,SAJa;AAKbQ,EAAAA,OAAO,EAAPA;AALa,CAAf","sourcesContent":["import { Login } from '@/api/login.js';\r\nimport {\r\n  setToken,\r\n  setUserName,\r\n  getUserName,\r\n  removeToken,\r\n  removeUserName\r\n} from '../../utils/getToken';\r\nconst state = {\r\n  isCollapse: JSON.parse(sessionStorage.getItem('isCollapse')) || false,\r\n  token: '',\r\n  name: getUserName() || ''\r\n};\r\nconst getters = {\r\n  isCollapse: state => state.isCollapse\r\n};\r\nconst mutations = {\r\n  SET_COLLAPSE(state, value) {\r\n    state.isCollapse = !state.isCollapse;\r\n    //html5 本地儲存\r\n    sessionStorage.setItem('isCollapse', JSON.stringify(state.isCollapse));\r\n  },\r\n  SET_TOKEN(state, value) {\r\n    state.token = value;\r\n  },\r\n  SET_USERNAME(sate, value) {\r\n    state.name = value;\r\n  }\r\n};\r\nconst actions = {\r\n  login({ commit }, requestData) {\r\n    return new Promise((resolve, rejcet) => {\r\n      Login(requestData)\r\n        .then(response => {\r\n          let data = response.data.data;\r\n\r\n          commit('SET_TOKEN', data.token);\r\n\r\n          commit('SET_USERNAME', data.username);\r\n\r\n          setToken(data.token);\r\n\r\n          setUserName(data.username);\r\n\r\n          resolve(response);\r\n        })\r\n        .catch(error => {\r\n          rejcet(error);\r\n        });\r\n    });\r\n  },\r\n  logout({ commit }) {\r\n    return new Promise((resolve, rejcet) => {\r\n      removeToken();\r\n      removeUserName();\r\n      commit('SET_TOKEN', '');\r\n      commit('SET_USERNAME', '');\r\n      resolve();\r\n    });\r\n  }\r\n};\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  mutations,\r\n  actions\r\n};\r\n"]}]}