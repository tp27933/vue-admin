{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\deposit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\deposit.vue","mtime":1595920934952},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCBjb21wdXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnZGVwb3NpdCcsDQogIHNldHVwKHByb3AsIGNvbnRleHQpIHsNCiAgICBjb25zdCBvcHRpb24gPSByZWYoJ+WEsuWAvCcpDQogICAgY29uc3QgZGlhbG9nRm9ybVZpc2libGUgPSByZWYoZmFsc2UpDQogICAgY29uc3QgZm9ybUxhYmVsV2lkdGggPSAnMTIwcHgnDQogICAgY29uc3QgZHluYW1pY1ZhbGlkYXRlRm9ybSA9IHJlYWN0aXZlKHsNCiAgICAgIGRvbWFpbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAnJywNCiAgICAgICAgICBhbW91bnQ6ICcnLA0KICAgICAgICB9LA0KICAgICAgXSwNCiAgICAgIGRlcG9zaXRBbW91bnQ6ICcnLA0KICAgICAgdHlwZTogJ+WEsuWAvCcsDQogICAgfSkNCg0KICAgIGNvbnN0IGRlcG9zaXRUb3RhbCA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIGlmIChpc05hTihkeW5hbWljVmFsaWRhdGVGb3JtLmRlcG9zaXRBbW91bnQpKSB7DQogICAgICAgIHJldHVybiAwDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZHluYW1pY1ZhbGlkYXRlRm9ybS5kZXBvc2l0QW1vdW50DQogICAgICB9DQogICAgfSkNCg0KICAgIGNvbnN0IHdpdGhkcmF3VG90YWwgPSBjb21wdXRlZCgoKSA9PiB7DQogICAgICByZXR1cm4gZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLnJlZHVjZSgocHJlLCBjdXIpID0+IHsNCiAgICAgICAgaWYgKGlzTmFOKGN1ci5hbW91bnQpKSB7DQogICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gcHJlICsgY3VyLmFtb3VudA0KICAgICAgICB9DQogICAgICB9LCAwKQ0KICAgIH0pDQoNCiAgICBjb25zdCByZW1vdmVEb21haW4gPSAoaXRlbSkgPT4gew0KICAgICAgdmFyIGluZGV4ID0gZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLmluZGV4T2YoaXRlbSkNCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsNCiAgICAgICAgZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLnNwbGljZShpbmRleCwgMSkNCiAgICAgIH0NCiAgICB9DQogICAgY29uc3QgYWRkRG9tYWluID0gKCkgPT4gew0KICAgICAgZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLnB1c2goew0KICAgICAgICB2YWx1ZTogJycsDQogICAgICAgIGtleTogRGF0ZS5ub3coKSwNCiAgICAgICAgYW1vdW50OiAnJywNCiAgICAgIH0pDQogICAgfQ0KDQogICAgY29uc3QgdG9nZ2xlTWVudSA9ICgpID0+IHsNCiAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2UnKQ0KICAgICAgb3B0aW9uLnZhbHVlID0gZHluYW1pY1ZhbGlkYXRlRm9ybS50eXBlDQogICAgICBjb250ZXh0LnJlZnNbJ2R5bmFtaWNWYWxpZGF0ZUZvcm0nXS5yZXNldEZpZWxkcygpDQogICAgICBkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMuc3BsaWNlKA0KICAgICAgICAxLA0KICAgICAgICBkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMubGVuZ3RoIC0gMSwNCiAgICAgICkNCiAgICAgIGNvbnNvbGUubG9nKGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucy5sZW5ndGgpDQogICAgfQ0KICAgIHJldHVybiB7DQogICAgICBvcHRpb24sDQogICAgICB0b2dnbGVNZW51LA0KICAgICAgZGVwb3NpdFRvdGFsLA0KICAgICAgd2l0aGRyYXdUb3RhbCwNCiAgICAgIHJlbW92ZURvbWFpbiwNCiAgICAgIGR5bmFtaWNWYWxpZGF0ZUZvcm0sDQogICAgICBhZGREb21haW4sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoLA0KICAgIH0NCiAgfSwNCn0NCg=="},{"version":3,"sources":["deposit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"deposit.vue","sourceRoot":"src/views/member/operation/Components/components_Tabs","sourcesContent":["<template>\r\n  <div id=\"deposit\">\r\n    <el-dialog title=\"金額操作\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form\r\n        :model=\"dynamicValidateForm\"\r\n        ref=\"dynamicValidateForm\"\r\n        label-width=\"120px\"\r\n        class=\"demo-dynamic\"\r\n      >\r\n        <el-form-item label=\"操作\">\r\n          <el-radio-group\r\n            v-model=\"dynamicValidateForm.type\"\r\n            placeholder=\"請選擇操作方式\"\r\n            size=\"medium\"\r\n            @change=\"toggleMenu\"\r\n          >\r\n            <el-radio label=\"儲值\"></el-radio>\r\n            <el-radio label=\"扣款\"></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <div class=\"deposit\" v-if=\"option === '儲值'\">\r\n          <el-form-item\r\n            label=\"金額\"\r\n            prop=\"depositAmount\"\r\n            :rules=\"[\r\n              { required: true, message: '年龄不能为空' },{ type: 'number', message: '年龄必须为数字值' },\r\n            ]\"\r\n          >\r\n            <el-input\r\n              v-model.number=\"dynamicValidateForm.depositAmount\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <h2 class=\"fixbug\">總金額 :{{ depositTotal }}</h2>\r\n        </div>\r\n\r\n        <div class=\"withdraw\" v-else>\r\n          <el-form-item\r\n            v-for=\"(domain, index) in dynamicValidateForm.domains\"\r\n            label=\"金額\"\r\n            :key=\"domain.key\"\r\n            :prop=\"'domains.' + index + '.value'\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '域名不能为空',\r\n              trigger: 'blur',\r\n            }\"\r\n          >\r\n            <el-form-item\r\n              :prop=\"'domains.' + index + '.amount'\"\r\n              :rules=\"[\r\n                { required: true, message: '请输入金額', trigger: 'blur' },\r\n                {\r\n                  type: 'number',\r\n                  message: '请输入數字類型',\r\n                  trigger: ['blur', 'change'],\r\n                },\r\n              ]\"\r\n              class=\"floatL\"\r\n            >\r\n              <el-input\r\n                v-model.number=\"dynamicValidateForm.domains[index].amount\"\r\n              ></el-input>\r\n            </el-form-item>\r\n\r\n            <el-select\r\n              v-model=\"dynamicValidateForm.domains[index].value\"\r\n              placeholder=\"請選擇消費類型\"\r\n              class=\"floatL\"\r\n              popper-class=\"typeOptions\"\r\n              :popper-append-to-body=\"false\"\r\n            >\r\n              <el-option label=\"剪髮\" value=\"haircut\"></el-option>\r\n              <el-option label=\"燙髮\" value=\"color \"></el-option>\r\n              <el-option label=\"染髮\" value=\"perm \"></el-option>\r\n              <el-option label=\"護髮\" value=\"treatment \"></el-option>\r\n              <el-option label=\"其他\" value=\"others \"></el-option>\r\n            </el-select>\r\n            <el-button @click=\"addDomain\">新增項目</el-button>\r\n            <el-button @click.prevent=\"removeDomain(domain)\">删除</el-button>\r\n\r\n            <h2>總金額 :{{ withdrawTotal }}</h2>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogFormVisible = false\">\r\n          确 定\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, computed } from '@vue/composition-api'\r\nexport default {\r\n  name: 'deposit',\r\n  setup(prop, context) {\r\n    const option = ref('儲值')\r\n    const dialogFormVisible = ref(false)\r\n    const formLabelWidth = '120px'\r\n    const dynamicValidateForm = reactive({\r\n      domains: [\r\n        {\r\n          value: '',\r\n          amount: '',\r\n        },\r\n      ],\r\n      depositAmount: '',\r\n      type: '儲值',\r\n    })\r\n\r\n    const depositTotal = computed(() => {\r\n      if (isNaN(dynamicValidateForm.depositAmount)) {\r\n        return 0\r\n      } else {\r\n        return dynamicValidateForm.depositAmount\r\n      }\r\n    })\r\n\r\n    const withdrawTotal = computed(() => {\r\n      return dynamicValidateForm.domains.reduce((pre, cur) => {\r\n        if (isNaN(cur.amount)) {\r\n          return 0\r\n        } else {\r\n          return pre + cur.amount\r\n        }\r\n      }, 0)\r\n    })\r\n\r\n    const removeDomain = (item) => {\r\n      var index = dynamicValidateForm.domains.indexOf(item)\r\n      if (index !== -1) {\r\n        dynamicValidateForm.domains.splice(index, 1)\r\n      }\r\n    }\r\n    const addDomain = () => {\r\n      dynamicValidateForm.domains.push({\r\n        value: '',\r\n        key: Date.now(),\r\n        amount: '',\r\n      })\r\n    }\r\n\r\n    const toggleMenu = () => {\r\n      console.log('change')\r\n      option.value = dynamicValidateForm.type\r\n      context.refs['dynamicValidateForm'].resetFields()\r\n      dynamicValidateForm.domains.splice(\r\n        1,\r\n        dynamicValidateForm.domains.length - 1,\r\n      )\r\n      console.log(dynamicValidateForm.domains.length)\r\n    }\r\n    return {\r\n      option,\r\n      toggleMenu,\r\n      depositTotal,\r\n      withdrawTotal,\r\n      removeDomain,\r\n      dynamicValidateForm,\r\n      addDomain,\r\n      dialogFormVisible,\r\n      formLabelWidth,\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-form-item__error {\r\n  top: 60%;\r\n}\r\n</style>\r\n"]}]}