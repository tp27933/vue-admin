{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\index.vue","mtime":1601922004422},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBTZWFyY2gsIEdFVFBST0ZJTEUgfSBmcm9tICdAL2FwaS91c2VyLmpzJw0KaW1wb3J0IFRhYkJhciBmcm9tICcuL0NvbXBvbmVudHMvVGFicy52dWUnDQppbXBvcnQgU2VhcmNoVnVlIGZyb20gJ0BjL1NlYXJjaCcNCg0KDQovL3Z1ZTMuMCBjb21wb3NpdGlvbi1hcGkNCmltcG9ydCB7IHJlYWN0aXZlLCByZWYsIGNvbXB1dGVkLCB3YXRjaCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnb3BlcmF0aW9uJywNCiAgY29tcG9uZW50czogeyBUYWJCYXIsIFNlYXJjaFZ1ZSB9LA0KICBzZXR1cCAocHJvcCwgeyByb290LCByZWZzIH0pIHsNCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0t5Yid5aeL5YyW5pW45YC8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQogICAgY29uc3Qgc2VhcmNoVmFsdWUgPSByZWYoJycpDQogICAgLy8gKCDmlrDkuIrlgrPpoK3osrzlnLDlnYAgKQ0KICAgIGNvbnN0IGltYWdlVXJsID0gcmVmKCcnKQ0KICAgIGNvbnN0IGRhdGEgPSByZWFjdGl2ZSh7DQogICAgICBpbnB1dFZhbHVlOiB7fSwNCiAgICAgIC8vICggc2VhcmNo5qih5aGKY29uZmlnICkNCiAgICAgIHNlYXJjaF9kYXRhOiB7DQogICAgICAgIGNvbmZpZzogew0KICAgICAgICAgIG1vZGVsOiAnJywNCiAgICAgICAgICBzaXplOiAnJywNCiAgICAgICAgICBsYWJlbFdpZHRoOiAnJywNCiAgICAgICAgfSwNCiAgICAgICAgY29udGVudDogWw0KICAgICAgICAgIHsgdHlwZTogJ0lucHV0JywgbGFiZWw6ICfmkJzntKInLCBwcm9wOiAnc2VhcmNoJywgcGxhY2Vob2xkZXI6ICfoq4vovLjlhaXlp5PlkI0uLi4nIH0NCiAgICAgICAgXQ0KICAgICAgfSwNCiAgICAgIC8vICgg6KGo5Zau5pW45pOaICkNCiAgICAgIGZvcm1EYXRhOiB7DQogICAgICAgIG5hbWU6ICcnLA0KICAgICAgICBnZW5kZXI6ICcnLA0KICAgICAgICBwaG9uZU51bWJlcjogJycsDQogICAgICAgIGNhcmROdW1iZXI6ICcnLA0KICAgICAgICBsZXZlbDogJycsDQogICAgICAgIGFtb3VudDogJycsDQogICAgICAgIG5vdGU6ICcnLA0KICAgICAgICBkaXNhYmxlOiB0cnVlLA0KICAgICAgICBwaWM6ICdodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzMvN2MvM2VhNmJlZWM2NDM2OWMyNjQyYjkyYzY3MjZmMWVwbmcucG5nJw0KICAgICAgfSwNCiAgICAgIC8vICgg6KGo5Zau5pW45pOa6Iux6L2J5LitICkNCiAgICAgIERhdGFUcmFuc2Zvcm06IHsNCiAgICAgICAgJ25hbWUnOiB7DQogICAgICAgICAgbGFiZWw6ICflp5PlkI0nDQogICAgICAgIH0sDQogICAgICAgICdnZW5kZXInOiB7DQogICAgICAgICAgbGFiZWw6ICfmgKcg5YilJw0KICAgICAgICB9LA0KICAgICAgICAncGhvbmVOdW1iZXInOiB7DQogICAgICAgICAgbGFiZWw6ICfpm7sg6KmxJw0KICAgICAgICB9LA0KICAgICAgICAnY2FyZE51bWJlcic6IHsNCiAgICAgICAgICBsYWJlbDogJ+WNoSDomZ8nDQogICAgICAgIH0sDQogICAgICAgICdsZXZlbCc6IHsNCiAgICAgICAgICBsYWJlbDogJ+etiSDntJonDQogICAgICAgIH0sDQogICAgICAgICdhbW91bnQnOiB7DQogICAgICAgICAgbGFiZWw6ICfph5Eg6aGNJw0KICAgICAgICB9LA0KICAgICAgICAnbm90ZSc6IHsNCiAgICAgICAgICBsYWJlbDogJ+WCmSDoqLsnDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9KQ0KDQoNCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS3lh73mlbgtLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KDQogICAgY29uc3QgaGFuZGxlQXZhdGFyU3VjY2VzcyA9IChyZXMsIGZpbGUpID0+IHsNCiAgICAgIGltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7DQogICAgfQ0KICAgIGNvbnN0IGJlZm9yZUF2YXRhclVwbG9hZCA9IChmaWxlKSA9PiB7DQogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnOw0KICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOw0KDQogICAgICBpZiAoIWlzSlBHKSB7DQogICAgICAgIHJvb3QuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEcg5qC85byPIScpOw0KICAgICAgfQ0KICAgICAgaWYgKCFpc0x0Mk0pIHsNCiAgICAgICAgcm9vdC4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsNCiAgICAgIH0NCiAgICAgIHJldHVybiBpc0pQRyAmJiBpc0x0Mk07DQogICAgfQ0KDQoNCiAgICBjb25zdCBTZWFyY2hVc2VyID0gKCgpID0+IHsNCiAgICAgIGNvbnN0IHZhbHVlID0gcmVmcy5zZWFyY2hWYWx1ZS52YWx1ZUlucHV0DQoNCiAgICAgIGlmICh2YWx1ZSA9PSAnJykgew0KICAgICAgICByb290LiRtZXNzYWdlLmVycm9yKCfoq4vovLjlhaXpl5zpjbXlrZcnKQ0KICAgICAgfQ0KICAgICAgc2VhcmNoVmFsdWUudmFsdWUgPSB2YWx1ZQ0KICAgICAgY2hlY2tVc2VyKHZhbHVlKQ0KICAgIH0pDQoNCg0KICAgIGNvbnN0IGNoZWNrVXNlciA9ICh2YWx1ZSkgPT4gew0KICAgICAgU2VhcmNoKHZhbHVlKS50aGVuKFNlYXJjaFJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKFNlYXJjaFJlc3BvbnNlLmRhdGEgPT09ICcnKSB7DQogICAgICAgICAgcm9vdC4kbWVzc2FnZS5lcnJvcign5p+l54Sh5q2k55So5oi277yM6KuL5YaN5qyh6Ly45YWlJykNCiAgICAgICAgICByZXR1cm4NCiAgICAgICAgfQ0KDQogICAgICAgIEdFVFBST0ZJTEUodmFsdWUpDQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYnl0ZUxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICBTZWFyY2hSZXNwb25zZS5kYXRhLnBpYyA9ICdodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzMvN2MvM2VhNmJlZWM2NDM2OWMyNjQyYjkyYzY3MjZmMWVwbmcucG5nJw0KICAgICAgICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAgICAgICBsZXQgaW1nID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYnRvYSgNCiAgICAgICAgICAgICAgICBuZXcgVWludDhBcnJheShyZXNwb25zZS5kYXRhKS5yZWR1Y2UoKGRhdGEsIGJ5dGUpID0+IGRhdGEgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUpLCAnJykNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBTZWFyY2hSZXNwb25zZS5kYXRhLnBpYyA9IGltZw0KICAgICAgICAgICAgICBkYXRhLmZvcm1EYXRhID0gU2VhcmNoUmVzcG9uc2UuZGF0YQ0KICAgICAgICAgICAgICByb290LiRzdG9yZS5jb21taXQoJ3VzZXJEYXRhL1JFTkRFUl9VU0VSJywgU2VhcmNoUmVzcG9uc2UuZGF0YSkNCiAgICAgICAgICAgICAgcm9vdC4kc3RvcmUuY29tbWl0KCd1c2VyRGF0YS9TRVRfVEFCU19ESVNBQkxFRCcsIGZhbHNlKQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfSkNCg0KDQoNCiAgICAgIH0pDQogICAgfQ0KICAgIHJldHVybiB7DQogICAgICBzZWFyY2hWYWx1ZSwNCiAgICAgIFNlYXJjaFVzZXIsDQogICAgICBkYXRhLA0KICAgICAgaW1hZ2VVcmwsDQogICAgICBoYW5kbGVBdmF0YXJTdWNjZXNzLA0KICAgICAgYmVmb3JlQXZhdGFyVXBsb2FkDQogICAgfQ0KICB9LA0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/member/operation","sourcesContent":["\r\n<template>\r\n  <div>\r\n\r\n    <el-row>\r\n      <el-col :span=\"20\">\r\n        <SearchVue\r\n          :config=\"data.search_data.config\"\r\n          :content=\"data.search_data.content\"\r\n          ref=\"searchValue\"\r\n        />\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"SearchUser\"\r\n        >查询</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <TabBar />\r\n    <template id=\"user-wrap\">\r\n      <ul\r\n        v-for=\"(val, key, index) in data.formData\"\r\n        :key='index'\r\n      >\r\n        <li v-if=\"data.DataTransform[key]\">\r\n\r\n          <label> {{data.DataTransform[key]['label']}}</label>\r\n          <p>{{val}}</p>\r\n        </li>\r\n      </ul>\r\n    </template>\r\n    <div class=\"\r\n            PROFILE\r\n            floatL\">\r\n      <el-avatar\r\n        :src='data.formData.pic'\r\n        fit=\"fill\"\r\n      > </el-avatar>\r\n      <h2>slive會員</h2>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n\r\n<script >\r\nimport { Search, GETPROFILE } from '@/api/user.js'\r\nimport TabBar from './Components/Tabs.vue'\r\nimport SearchVue from '@c/Search'\r\n\r\n\r\n//vue3.0 composition-api\r\nimport { reactive, ref, computed, watch } from '@vue/composition-api'\r\nexport default {\r\n  name: 'operation',\r\n  components: { TabBar, SearchVue },\r\n  setup (prop, { root, refs }) {\r\n    /*-----------------初始化數值----------------------*/\r\n    const searchValue = ref('')\r\n    // ( 新上傳頭貼地址 )\r\n    const imageUrl = ref('')\r\n    const data = reactive({\r\n      inputValue: {},\r\n      // ( search模塊config )\r\n      search_data: {\r\n        config: {\r\n          model: '',\r\n          size: '',\r\n          labelWidth: '',\r\n        },\r\n        content: [\r\n          { type: 'Input', label: '搜索', prop: 'search', placeholder: '請輸入姓名...' }\r\n        ]\r\n      },\r\n      // ( 表單數據 )\r\n      formData: {\r\n        name: '',\r\n        gender: '',\r\n        phoneNumber: '',\r\n        cardNumber: '',\r\n        level: '',\r\n        amount: '',\r\n        note: '',\r\n        disable: true,\r\n        pic: 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png'\r\n      },\r\n      // ( 表單數據英轉中 )\r\n      DataTransform: {\r\n        'name': {\r\n          label: '姓名'\r\n        },\r\n        'gender': {\r\n          label: '性 別'\r\n        },\r\n        'phoneNumber': {\r\n          label: '電 話'\r\n        },\r\n        'cardNumber': {\r\n          label: '卡 號'\r\n        },\r\n        'level': {\r\n          label: '等 級'\r\n        },\r\n        'amount': {\r\n          label: '金 額'\r\n        },\r\n        'note': {\r\n          label: '備 註'\r\n        }\r\n      }\r\n    })\r\n\r\n\r\n\r\n    /*-----------------函數---------------------*/\r\n\r\n    const handleAvatarSuccess = (res, file) => {\r\n      imageUrl = URL.createObjectURL(file.raw);\r\n    }\r\n    const beforeAvatarUpload = (file) => {\r\n      const isJPG = file.type === 'image/jpeg';\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isJPG) {\r\n        root.$message.error('上传头像图片只能是 JPG 格式!');\r\n      }\r\n      if (!isLt2M) {\r\n        root.$message.error('上传头像图片大小不能超过 2MB!');\r\n      }\r\n      return isJPG && isLt2M;\r\n    }\r\n\r\n\r\n    const SearchUser = (() => {\r\n      const value = refs.searchValue.valueInput\r\n\r\n      if (value == '') {\r\n        root.$message.error('請輸入關鍵字')\r\n      }\r\n      searchValue.value = value\r\n      checkUser(value)\r\n    })\r\n\r\n\r\n    const checkUser = (value) => {\r\n      Search(value).then(SearchResponse => {\r\n        if (SearchResponse.data === '') {\r\n          root.$message.error('查無此用戶，請再次輸入')\r\n          return\r\n        }\r\n\r\n        GETPROFILE(value)\r\n          .then(response => {\r\n            if (response.data.byteLength === 0) {\r\n              SearchResponse.data.pic = 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png'\r\n            } else {\r\n\r\n              let img = 'data:image/png;base64,' + btoa(\r\n                new Uint8Array(response.data).reduce((data, byte) => data + String.fromCharCode(byte), '')\r\n              )\r\n              SearchResponse.data.pic = img\r\n              data.formData = SearchResponse.data\r\n              root.$store.commit('userData/RENDER_USER', SearchResponse.data)\r\n              root.$store.commit('userData/SET_TABS_DISABLED', false)\r\n            }\r\n\r\n          })\r\n\r\n\r\n\r\n      })\r\n    }\r\n    return {\r\n      searchValue,\r\n      SearchUser,\r\n      data,\r\n      imageUrl,\r\n      handleAvatarSuccess,\r\n      beforeAvatarUpload\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\np {\r\n  display: inline;\r\n}\r\n.el-avatar {\r\n  width: 200px;\r\n  height: 200px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}