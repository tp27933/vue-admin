{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\deposit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\deposit.vue","mtime":1603973114687},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBEZXBvc2l0LCBXaXRoZHJhdyB9IGZyb20gJ0AvYXBpL3VzZXIuanMnOw0KDQppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCBjb21wdXRlZCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ2RlcG9zaXQnLA0KICBzZXR1cChwcm9wLCB7IHJvb3QsIHJlZnMgfSkgew0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS3liJ3lp4vljJbmlbjlgLwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8NCiAgICBjb25zdCBvcHRpb24gPSByZWYoJ2RlcG9zaXQnKTsNCiAgICBjb25zdCBkaWFsb2dGb3JtVmlzaWJsZSA9IHJlZihmYWxzZSk7DQogICAgY29uc3QgZm9ybUxhYmVsV2lkdGggPSAnMTIwcHgnOw0KICAgIGNvbnN0IHR5cGVTZWxlY3QgPSByZWFjdGl2ZShbDQogICAgICB7DQogICAgICAgIGxhYmVsOiAn5Ymq6auuJywNCiAgICAgICAgdmFsdWU6ICdoYWlyY3V0Jw0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbGFiZWw6ICfmn5Ppq64nLA0KICAgICAgICB2YWx1ZTogJ2NvbG9yJw0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbGFiZWw6ICfnh5npq64nLA0KICAgICAgICB2YWx1ZTogJ3Blcm0nDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBsYWJlbDogJ+itt+eQhicsDQogICAgICAgIHZhbHVlOiAndHJlYXRtZW50Jw0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbGFiZWw6ICflhbbku5YnLA0KICAgICAgICB2YWx1ZTogJ290aGVycycNCiAgICAgIH0NCiAgICBdKTsNCiAgICBjb25zdCBkeW5hbWljVmFsaWRhdGVGb3JtID0gcmVhY3RpdmUoew0KICAgICAgZG9tYWluczogWw0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6ICcnLA0KICAgICAgICAgIGFtb3VudDogJycNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIGRlcG9zaXRBbW91bnQ6ICcnLA0KICAgICAgdHlwZTogJ2RlcG9zaXQnDQogICAgfSk7DQoNCiAgICAvLy0tLS0tLS0tLS0tLS0tLS0t55uj6IG95pW45YC8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vDQogICAgLy8gKCDlhLLlgLznuL3poY0gKQ0KICAgIGNvbnN0IGRlcG9zaXRUb3RhbCA9IGNvbXB1dGVkKCgpID0+IHsNCiAgICAgIGlmIChpc05hTihkeW5hbWljVmFsaWRhdGVGb3JtLmRlcG9zaXRBbW91bnQpKSB7DQogICAgICAgIHJldHVybiArMDsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBkeW5hbWljVmFsaWRhdGVGb3JtLmRlcG9zaXRBbW91bnQ7DQogICAgICB9DQogICAgfSk7DQogICAgLy8gKCDmiaPmrL7nuL3poY0gKQ0KICAgIGNvbnN0IHdpdGhkcmF3VG90YWwgPSBjb21wdXRlZCgoKSA9PiB7DQogICAgICByZXR1cm4gZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLnJlZHVjZSgocHJlLCBjdXIpID0+IHsNCiAgICAgICAgaWYgKGlzTmFOKGN1ci5hbW91bnQpKSB7DQogICAgICAgICAgcmV0dXJuIHByZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gcHJlICsgY3VyLmFtb3VudDsNCiAgICAgICAgfQ0KICAgICAgfSwgMCk7DQogICAgfSk7DQoNCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0t5Ye95pW46IGy5piOLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICAvLyAoIOWIh+aPm+aTjeS9nOmhnuWeiyApDQogICAgY29uc3QgdG9nZ2xlTWVudSA9ICgpID0+IHsNCiAgICAgIC8v5YiH5o+b6aGv56S65qGGDQogICAgICBvcHRpb24udmFsdWUgPSBkeW5hbWljVmFsaWRhdGVGb3JtLnR5cGU7DQogICAgICAvL+mHjee9ruihqOWWrg0KICAgICAgcmVmc1snZHluYW1pY1ZhbGlkYXRlRm9ybSddLnJlc2V0RmllbGRzKCk7DQogICAgICAvL+Wwh+aJo+asvuihqOWWrueahOaWsOWinumgheebrumHjee9rg0KICAgICAgZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLnNwbGljZSgxLCBkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMubGVuZ3RoIC0gMSk7DQogICAgfTsNCg0KICAgIC8vICgg5LiK5YKz6KGo5ZauICkNCiAgICBjb25zdCBzdWJtaXQgPSBmb3JtTmFtZSA9PiB7DQogICAgICByZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIGR5bmFtaWNWYWxpZGF0ZUZvcm0udHlwZSA9PT0gJ2RlcG9zaXQnID8gZGVwb3NpdCgpIDogd2lkdGhkcmF3KCk7DQogICAgICAgICAgZGlhbG9nRm9ybVZpc2libGUudmFsdWUgPSBmYWxzZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByb290LiRtZXNzYWdlLmVycm9yKCfkv6HnrrHkuI3og73ngrrnqbonKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfTsNCiAgICAvLyAoIOWEsuWAvOaTjeS9nCApDQogICAgY29uc3QgZGVwb3NpdCA9ICgpID0+IHsNCiAgICAgIGxldCB1c2VyID0gcm9vdC4kc3RvcmUuc3RhdGUudXNlckRhdGEudXNlckZvcm07DQogICAgICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgICAgIG5hbWU6IHVzZXIubmFtZSwNCiAgICAgICAgY2FyZE51bWJlcjogdXNlci5jYXJkTnVtYmVyLA0KICAgICAgICBhbW91bnQ6IGR5bmFtaWNWYWxpZGF0ZUZvcm0uZGVwb3NpdEFtb3VudCwNCiAgICAgICAgdHlwZTogZHluYW1pY1ZhbGlkYXRlRm9ybS50eXBlDQogICAgICB9Ow0KDQogICAgICBEZXBvc2l0KHJlcXVlc3REYXRhKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgcm9vdC4kc3RvcmUuY29tbWl0KCd1c2VyRGF0YS9SRU5ERVJfVVNFUicsIHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgIHJvb3QuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKn+aTjeS9nCcsDQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICByb290LiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6ICflh7rnj77llY/poYws6KuL56iN5b6M5Zyo6KmmJywNCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfTsNCiAgICAvLyAoIOaJo+asvuaTjeS9nCApDQoNCiAgICBjb25zdCB3aWR0aGRyYXcgPSAoKSA9PiB7DQogICAgICBsZXQgdXNlciA9IHJvb3QuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLnVzZXJGb3JtOw0KICAgICAgbGV0IHJlcXVlc3REYXRhID0gew0KICAgICAgICBuYW1lOiB1c2VyLm5hbWUsDQogICAgICAgIGNhcmROdW1iZXI6IHVzZXIuY2FyZE51bWJlciwNCiAgICAgICAgdHlwZTogZHluYW1pY1ZhbGlkYXRlRm9ybS50eXBlLA0KICAgICAgICBkZXRhaWw6IGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucw0KICAgICAgfTsNCg0KICAgICAgV2l0aGRyYXcocmVxdWVzdERhdGEpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICByb290LiRzdG9yZS5jb21taXQoJ3VzZXJEYXRhL1JFTkRFUl9VU0VSJywgcmVzcG9uc2UuZGF0YSk7DQogICAgICAgICAgcm9vdC4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5oiQ5YqfJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgIHJvb3QuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IsDQogICAgICAgICAgICB0eXBlOiAnZXJyb3InDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICBjb25zdCByZW1vdmVEb21haW4gPSBpdGVtID0+IHsNCiAgICAgDQogICAgICB2YXIgaW5kZXggPSBkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMuaW5kZXhPZihpdGVtKTsNCiAgICAgIGlmIChpbmRleCAhPT0gLTEgJiYgZHluYW1pY1ZhbGlkYXRlRm9ybS5kb21haW5zLmxlbmd0aCE9PTEpIHsNCiAgICAgICAgIGNvbnNvbGUubG9nKGR5bmFtaWNWYWxpZGF0ZUZvcm0uZG9tYWlucy5sZW5ndGgpOw0KICAgICAgICBkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIC8vICgg5paw5aKe5omj5qy+6aCF55uuICkNCiAgICBjb25zdCBhZGREb21haW4gPSAoKSA9PiB7DQogICAgICBkeW5hbWljVmFsaWRhdGVGb3JtLmRvbWFpbnMucHVzaCh7DQogICAgICAgIHZhbHVlOiAnJywNCiAgICAgICAga2V5OiBEYXRlLm5vdygpLA0KICAgICAgICBhbW91bnQ6ICcnDQogICAgICB9KTsNCiAgICB9Ow0KDQogICAgY29uc3QgcmVzZXRGaWVsZHMgPSAoKSA9PiB7DQogICAgICAgIHJlZnNbJ2R5bmFtaWNWYWxpZGF0ZUZvcm0nXS5yZXNldEZpZWxkcygpOw0KICAgIH07DQogICAgcmV0dXJuIHsNCiAgICAgIHJlc2V0RmllbGRzLA0KICAgICAgdHlwZVNlbGVjdCwNCiAgICAgIGRlcG9zaXQsDQogICAgICB3aWR0aGRyYXcsDQogICAgICBzdWJtaXQsDQogICAgICBvcHRpb24sDQogICAgICB0b2dnbGVNZW51LA0KICAgICAgZGVwb3NpdFRvdGFsLA0KICAgICAgd2l0aGRyYXdUb3RhbCwNCiAgICAgIHJlbW92ZURvbWFpbiwNCiAgICAgIGR5bmFtaWNWYWxpZGF0ZUZvcm0sDQogICAgICBhZGREb21haW4sDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoDQogICAgfTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["deposit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"deposit.vue","sourceRoot":"src/views/member/operation/Components/components_Tabs","sourcesContent":["<template>\r\n  <div id=\"deposit\">\r\n    <el-dialog title=\"金額操作\" :visible.sync=\"dialogFormVisible\" @close=\"resetFields('dynamicValidateForm')\">\r\n      <el-form\r\n        :model=\"dynamicValidateForm\"\r\n        ref=\"dynamicValidateForm\"\r\n        label-width=\"120px\"\r\n        class=\"demo-dynamic\"\r\n      >\r\n        <el-form-item label=\"操作\">\r\n          <el-radio-group\r\n            v-model=\"dynamicValidateForm.type\"\r\n            placeholder=\"請選擇操作方式\"\r\n            size=\"medium\"\r\n            @change=\"toggleMenu\"\r\n          >\r\n            <el-radio label=\"deposit\">儲值</el-radio>\r\n            <el-radio label=\"withdraw\">扣款</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <!----------------切換至--------------------->\r\n\r\n        <div class=\"deposit\" v-if=\"option === 'deposit'\">\r\n          <el-form-item\r\n            label=\"金額\"\r\n            prop=\"depositAmount\"\r\n            :rules=\"[\r\n              { required: true, message: '年龄不能为空' },\r\n              { type: 'number', message: '年龄必须为数字值' }\r\n            ]\"\r\n          >\r\n            <el-input\r\n              v-model.number=\"dynamicValidateForm.depositAmount\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <h2 class=\"fixbug\">總金額 :{{ depositTotal }}</h2>\r\n        </div>\r\n\r\n        <!----------------切換至扣款--------------------->\r\n        <div class=\"withdraw\" v-else>\r\n          <el-form-item\r\n            v-for=\"(domain, index) in dynamicValidateForm.domains\"\r\n            label=\"金額\"\r\n            :key=\"domain.key\"\r\n            :prop=\"'domains.' + index + '.value'\"\r\n            :rules=\"{\r\n              required: true,\r\n              message: '域名不能为空',\r\n              trigger: 'blur'\r\n            }\"\r\n          >\r\n            <el-form-item\r\n              :prop=\"'domains.' + index + '.amount'\"\r\n              :rules=\"[\r\n                { required: true, message: '请输入金額', trigger: 'blur' },\r\n                {\r\n                  type: 'number',\r\n                  message: '请输入數字類型',\r\n                  trigger: ['blur', 'change']\r\n                }\r\n              ]\"\r\n              class=\"floatL\"\r\n            >\r\n              <el-input v-model.number=\"dynamicValidateForm.domains[index].amount\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-select\r\n              v-model=\"dynamicValidateForm.domains[index].value\"\r\n              placeholder=\"請選擇消費類型\"\r\n              class=\"floatL\"\r\n              popper-class=\"typeOptions\"\r\n              :popper-append-to-body=\"false\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in typeSelect\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n\r\n            <el-button @click=\"addDomain\">新增項目</el-button>\r\n            <el-button @click.prevent=\"removeDomain(domain)\">删除</el-button>\r\n\r\n            <h2>總金額 :{{ withdrawTotal }}</h2>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submit('dynamicValidateForm')\">\r\n          确 定\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Deposit, Withdraw } from '@/api/user.js';\r\n\r\nimport { reactive, ref, computed } from '@vue/composition-api';\r\nexport default {\r\n  name: 'deposit',\r\n  setup(prop, { root, refs }) {\r\n    /*-----------------初始化數值----------------------*/\r\n    const option = ref('deposit');\r\n    const dialogFormVisible = ref(false);\r\n    const formLabelWidth = '120px';\r\n    const typeSelect = reactive([\r\n      {\r\n        label: '剪髮',\r\n        value: 'haircut'\r\n      },\r\n      {\r\n        label: '染髮',\r\n        value: 'color'\r\n      },\r\n      {\r\n        label: '燙髮',\r\n        value: 'perm'\r\n      },\r\n      {\r\n        label: '護理',\r\n        value: 'treatment'\r\n      },\r\n      {\r\n        label: '其他',\r\n        value: 'others'\r\n      }\r\n    ]);\r\n    const dynamicValidateForm = reactive({\r\n      domains: [\r\n        {\r\n          value: '',\r\n          amount: ''\r\n        }\r\n      ],\r\n      depositAmount: '',\r\n      type: 'deposit'\r\n    });\r\n\r\n    //-----------------監聽數值----------------------//\r\n    // ( 儲值總額 )\r\n    const depositTotal = computed(() => {\r\n      if (isNaN(dynamicValidateForm.depositAmount)) {\r\n        return +0;\r\n      } else {\r\n        return dynamicValidateForm.depositAmount;\r\n      }\r\n    });\r\n    // ( 扣款總額 )\r\n    const withdrawTotal = computed(() => {\r\n      return dynamicValidateForm.domains.reduce((pre, cur) => {\r\n        if (isNaN(cur.amount)) {\r\n          return pre;\r\n        } else {\r\n          return pre + cur.amount;\r\n        }\r\n      }, 0);\r\n    });\r\n\r\n    /*-----------------函數聲明----------------------*/\r\n\r\n    // ( 切換操作類型 )\r\n    const toggleMenu = () => {\r\n      //切換顯示框\r\n      option.value = dynamicValidateForm.type;\r\n      //重置表單\r\n      refs['dynamicValidateForm'].resetFields();\r\n      //將扣款表單的新增項目重置\r\n      dynamicValidateForm.domains.splice(1, dynamicValidateForm.domains.length - 1);\r\n    };\r\n\r\n    // ( 上傳表單 )\r\n    const submit = formName => {\r\n      refs[formName].validate(valid => {\r\n        if (valid) {\r\n          dynamicValidateForm.type === 'deposit' ? deposit() : widthdraw();\r\n          dialogFormVisible.value = false;\r\n        } else {\r\n          root.$message.error('信箱不能為空');\r\n        }\r\n      });\r\n    };\r\n    // ( 儲值操作 )\r\n    const deposit = () => {\r\n      let user = root.$store.state.userData.userForm;\r\n      let requestData = {\r\n        name: user.name,\r\n        cardNumber: user.cardNumber,\r\n        amount: dynamicValidateForm.depositAmount,\r\n        type: dynamicValidateForm.type\r\n      };\r\n\r\n      Deposit(requestData)\r\n        .then(response => {\r\n          root.$store.commit('userData/RENDER_USER', response.data);\r\n          root.$message({\r\n            message: '成功操作',\r\n            type: 'success'\r\n          });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          root.$message({\r\n            message: '出現問題,請稍後在試',\r\n            type: 'error'\r\n          });\r\n        });\r\n    };\r\n    // ( 扣款操作 )\r\n\r\n    const widthdraw = () => {\r\n      let user = root.$store.state.userData.userForm;\r\n      let requestData = {\r\n        name: user.name,\r\n        cardNumber: user.cardNumber,\r\n        type: dynamicValidateForm.type,\r\n        detail: dynamicValidateForm.domains\r\n      };\r\n\r\n      Withdraw(requestData)\r\n        .then(response => {\r\n          root.$store.commit('userData/RENDER_USER', response.data);\r\n          root.$message({\r\n            message: '操作成功',\r\n            type: 'success'\r\n          });\r\n        })\r\n        .catch(error => {\r\n          root.$message({\r\n            message: error,\r\n            type: 'error'\r\n          });\r\n        });\r\n    };\r\n\r\n    const removeDomain = item => {\r\n     \r\n      var index = dynamicValidateForm.domains.indexOf(item);\r\n      if (index !== -1 && dynamicValidateForm.domains.length!==1) {\r\n         console.log(dynamicValidateForm.domains.length);\r\n        dynamicValidateForm.domains.splice(index, 1);\r\n      }\r\n    };\r\n    // ( 新增扣款項目 )\r\n    const addDomain = () => {\r\n      dynamicValidateForm.domains.push({\r\n        value: '',\r\n        key: Date.now(),\r\n        amount: ''\r\n      });\r\n    };\r\n\r\n    const resetFields = () => {\r\n        refs['dynamicValidateForm'].resetFields();\r\n    };\r\n    return {\r\n      resetFields,\r\n      typeSelect,\r\n      deposit,\r\n      widthdraw,\r\n      submit,\r\n      option,\r\n      toggleMenu,\r\n      depositTotal,\r\n      withdrawTotal,\r\n      removeDomain,\r\n      dynamicValidateForm,\r\n      addDomain,\r\n      dialogFormVisible,\r\n      formLabelWidth\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-form-item__error {\r\n  top: 60%;\r\n}\r\n\r\n</style>\r\n"]}]}