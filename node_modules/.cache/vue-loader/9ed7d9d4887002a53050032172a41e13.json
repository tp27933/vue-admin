{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\signup\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\signup\\index.vue","mtime":1595518079431},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBTaWdudXB9IGZyb20gJ0AvYXBpL3VzZXIuanMnDQoNCmltcG9ydCB7IHJlYWN0aXZlLCByZWYgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3NpZ251cCcsDQogIHNldHVwKHByb3BzLCB7IHJvb3QsIHJlZnMgfSkgew0KICAgIGNvbnN0IGhpZGVVcGxvYWQgPSByZWYoZmFsc2UpDQoNCiAgICBjb25zdCBkaWFsb2dJbWFnZVVybCA9IHJlZignJykNCiAgICBjb25zdCBkaWFsb2dWaXNpYmxlID0gcmVmKGZhbHNlKQ0KDQogICAgY29uc3QgcnVsZUZvcm0gPSByZWFjdGl2ZSh7DQogICAgICBuYW1lOiAnJywNCiAgICAgIGdlbmRlcjogJycsDQogICAgICBjYXJkTnVtYmVyOiAnJywNCiAgICAgIGxldmVsOiAnJywNCiAgICAgIGFtb3VudDogJycsDQogICAgICBub3RlOiAnJywNCiAgICB9KQ0KDQogICAgY29uc3QgcnVsZXMgPSB7DQogICAgICBuYW1lOiBbeyAgbWVzc2FnZTogJ+iri+i8uOWFpeWnk+WQjScsIHRyaWdnZXI6ICdibHVyJyB9XSwNCiAgICAgIGdlbmRlcjogW3sgIG1lc3NhZ2U6ICfor7fpgInmi6nmgKfliKUnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwNCiAgICAgIGNhcmROdW1iZXI6IFsgew0KICAgICAgICAgcmVxdWlyZTp0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfoq4vovLjlhaXljaHomZ8nLA0KICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICB9LF0sDQogICAgICBsZXZlbDogWw0KICAgICAgICB7DQogICAgICAgICAgbWVzc2FnZTogJ+iri+mBuOaTh+acg+WToeWNoeetiee0micsDQogICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgYW1vdW50OiBbDQogICAgICAgIHsgbWVzc2FnZTogJ+iri+i8uOWFpeWEsuWAvOmHkemhjScsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICBdLA0KICAgIH0NCg0KICAgIGNvbnN0IGJlZm9yZUF2YXRhclVwbG9hZCA9IChmaWxlKSA9PiB7DQogICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnDQogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDINCg0KICAgICAgaWYgKCFpc0pQRykgew0KICAgICAgICAkbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJykNCiAgICAgIH0NCiAgICAgIGlmICghaXNMdDJNKSB7DQogICAgICAgICRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpDQogICAgICB9DQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNDQogICAgfQ0KDQogICAgY29uc3Qgc3VibWl0Rm9ybSA9IChmb3JtTmFtZSkgPT4gew0KDQogICAgICByZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgc2lnbnVwKCkNCiAgICAgICAgICANCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0NCiAgICBjb25zdCByZXNldEZvcm0gPSAoZm9ybU5hbWUpID0+IHsNCiAgICAgIHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCkNCiAgICB9DQpjb25zdCBzaWdudXAgPSAoKCkgPT4gew0KICAgICAgLy/njbLlj5bnlKjmiLbnmbvlhaXos4foqIoNCiAgICAgICBsZXQgcmVxdWVzdERhdGEgPSB7DQogICAgICAgIHVzZXJuYW1lOiBydWxlRm9ybS5uYW1lLA0KICAgICAgICBnZW5kZXI6IHJ1bGVGb3JtLmdlbmRlciwNCiAgICAgICAgY2FyZE51bWJlcjogcnVsZUZvcm0uY2FyZE51bWJlciwNCiAgICAgICAgbGV2ZWw6IHJ1bGVGb3JtLmxldmVsLA0KICAgICAgICBhbW91bnQ6IHJ1bGVGb3JtLmFtb3VudCwNCiAgICAgICAgbm90ZTogcnVsZUZvcm0ubm90ZSwNCg0KICAgICAgfQ0KICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOyAvLyBDdXJyZW50bHkgZW1wdHkNCiAgICAgIGZvcih2YXIga2V5IGluIHJ1bGVGb3JtKXsNCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSxydWxlRm9ybVtrZXldKTsNCiAgICAgIH0NCg0KICAgICAgU2lnbnVwKGZvcm1EYXRhKQ0KICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQoNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQoNCiAgICAgICAgIGNvbnNvbGUubG9nKCfku4vpnaLlt7LmlLbliLAnKTsNCiAgfSkNCiAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnZmFpbCcpOw0KICAgICAgICB9KQ0KfSkNCiAgICAgDQogICANCiAgICBjb25zdCBoYW5kbGVSZW1vdmUgPSAoZmlsZSwgZmlsZUxpc3QpID0+IHsNCiAgICAgIGNvbnNvbGUubG9nKGZpbGUsIGZpbGVMaXN0KQ0KICAgICAgaGlkZVVwbG9hZC52YWx1ZSA9IGZhbHNlDQogICAgfQ0KICAgIGNvbnN0IGhhbmRsZVBpY3R1cmVDYXJkUHJldmlldyA9IChmaWxlKSA9PiB7DQogICAgICBjb25zb2xlLmxvZygnMicpDQogICAgICBkaWFsb2dJbWFnZVVybC52YWx1ZSA9IGZpbGUudXJsDQogICAgICBkaWFsb2dWaXNpYmxlLnZhbHVlID0gdHJ1ZQ0KICAgIH0NCg0KICAgIGNvbnN0IHR4dCA9IChmaWxlLCBmaWxlTGlzdCkgPT4gew0KICAgICAgaWYgKGZpbGVMaXN0Lmxlbmd0aCA+PSAxKSB7DQogICAgICAgIGhpZGVVcGxvYWQudmFsdWUgPSB0cnVlDQogICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHsNCiAgICAgIHN1Ym1pdEZvcm0sDQogICAgICByZXNldEZvcm0sDQogICAgICB0eHQsDQogICAgICBoaWRlVXBsb2FkLA0KICAgICAgaGFuZGxlUmVtb3ZlLA0KICAgICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3LA0KDQogICAgICBydWxlRm9ybSwNCiAgICAgIHJ1bGVzLA0KU2lnbnVwLA0KICAgICAgZGlhbG9nVmlzaWJsZSwNCiAgICAgIGRpYWxvZ0ltYWdlVXJsLA0KICAgICAgYmVmb3JlQXZhdGFyVXBsb2FkLA0KICAgIH0NCiAgfSwNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/member/signup","sourcesContent":["<template>\r\n  <div id=\"signup-wrap\">\r\n    <el-form\r\n      :model=\"ruleForm\"\r\n      :rules=\"rules\"\r\n      ref=\"ruleForm\"\r\n      label-width=\"100px\"\r\n      class=\"demo-ruleForm floatL\"\r\n    >\r\n      <el-form-item label=\"姓名\" prop=\"name\">\r\n        <el-input v-model=\"ruleForm.name\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"性別\" prop=\"gender\">\r\n        <el-radio-group v-model=\"ruleForm.gender\">\r\n          <el-radio label=\"女\"></el-radio>\r\n          <el-radio label=\"男\"></el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"卡號\" prop=\"cardNumber\">\r\n        <el-input v-model=\"ruleForm.cardNumber\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"卡別\" prop=\"level\">\r\n        <el-select v-model=\"ruleForm.level\" placeholder=\"请选择會員卡等級\">\r\n          <el-option label=\"銀卡 \" value=\"sliver\"></el-option>\r\n          <el-option label=\"黃金\" value=\"gold\"></el-option>\r\n          <el-option label=\"vip\" value=\"vip\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"儲值金\" prop=\"amount\">\r\n        <el-input v-model=\"ruleForm.amount\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"備註\" prop=\"note\">\r\n        <el-input type=\"textarea\" v-model=\"ruleForm.note\"></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">\r\n          立即创建\r\n        </el-button>\r\n        <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div class=\"upload floatL\">\r\n      <el-upload\r\n        action=\"https://www.mocky.io/v2/5185415ba171ea3a00704eed/posts/\"\r\n        list-type=\"picture-card\"\r\n        :on-preview=\"handlePictureCardPreview\"\r\n        :on-remove=\"handleRemove\"\r\n        :class=\"{ hide: hideUpload }\"\r\n        :on-change=\"txt\"\r\n      >\r\n        <i class=\"el-icon-plus\"></i>\r\n      </el-upload>\r\n    </div>\r\n\r\n    <el-dialog :visible.sync=\"dialogVisible\">\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Signup} from '@/api/user.js'\r\n\r\nimport { reactive, ref } from '@vue/composition-api'\r\nexport default {\r\n  name: 'signup',\r\n  setup(props, { root, refs }) {\r\n    const hideUpload = ref(false)\r\n\r\n    const dialogImageUrl = ref('')\r\n    const dialogVisible = ref(false)\r\n\r\n    const ruleForm = reactive({\r\n      name: '',\r\n      gender: '',\r\n      cardNumber: '',\r\n      level: '',\r\n      amount: '',\r\n      note: '',\r\n    })\r\n\r\n    const rules = {\r\n      name: [{  message: '請輸入姓名', trigger: 'blur' }],\r\n      gender: [{  message: '请选择性別', trigger: 'change' }],\r\n      cardNumber: [ {\r\n         require:true,\r\n          message: '請輸入卡號',\r\n          trigger: 'change',\r\n        },],\r\n      level: [\r\n        {\r\n          message: '請選擇會員卡等級',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n      amount: [\r\n        { message: '請輸入儲值金額', trigger: 'change' },\r\n      ],\r\n    }\r\n\r\n    const beforeAvatarUpload = (file) => {\r\n      const isJPG = file.type === 'image/jpeg'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG) {\r\n        $message.error('上传头像图片只能是 JPG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        $message.error('上传头像图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG && isLt2M\r\n    }\r\n\r\n    const submitForm = (formName) => {\r\n\r\n      refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          signup()\r\n          \r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    }\r\n    const resetForm = (formName) => {\r\n      refs[formName].resetFields()\r\n    }\r\nconst signup = (() => {\r\n      //獲取用戶登入資訊\r\n       let requestData = {\r\n        username: ruleForm.name,\r\n        gender: ruleForm.gender,\r\n        cardNumber: ruleForm.cardNumber,\r\n        level: ruleForm.level,\r\n        amount: ruleForm.amount,\r\n        note: ruleForm.note,\r\n\r\n      }\r\n    var formData = new FormData(); // Currently empty\r\n      for(var key in ruleForm){\r\n        formData.append(key,ruleForm[key]);\r\n      }\r\n\r\n      Signup(formData)\r\n        .then(response => {\r\n\r\n          console.log(response);\r\n\r\n         console.log('介面已收到');\r\n  })\r\n  .catch(error => {\r\n          console.log('fail');\r\n        })\r\n})\r\n     \r\n   \r\n    const handleRemove = (file, fileList) => {\r\n      console.log(file, fileList)\r\n      hideUpload.value = false\r\n    }\r\n    const handlePictureCardPreview = (file) => {\r\n      console.log('2')\r\n      dialogImageUrl.value = file.url\r\n      dialogVisible.value = true\r\n    }\r\n\r\n    const txt = (file, fileList) => {\r\n      if (fileList.length >= 1) {\r\n        hideUpload.value = true\r\n      }\r\n    }\r\n\r\n    return {\r\n      submitForm,\r\n      resetForm,\r\n      txt,\r\n      hideUpload,\r\n      handleRemove,\r\n      handlePictureCardPreview,\r\n\r\n      ruleForm,\r\n      rules,\r\nSignup,\r\n      dialogVisible,\r\n      dialogImageUrl,\r\n      beforeAvatarUpload,\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" >\r\n#signup-wrap {\r\n  position: relative;\r\n  top: 50%;\r\n\r\n  margin-top: -240px;\r\n}\r\n\r\n.el-upload--picture-card{\r\n  .el-icon-plus{\r\n  line-height: 300px!important;\r\n}\r\n}\r\n\r\n.hide .el-upload--picture-card {\r\n  display: none;\r\n}\r\n.upload {\r\n  width: 20%;\r\n  height: 400px;\r\n  margin-left: 30px;\r\n}\r\n.el-form {\r\n  width: 60%;\r\n}\r\n\r\n.el-upload--picture-card {\r\n  width: 100%;\r\n  height: 300px;\r\n}\r\n.el-upload-list--picture-card {\r\n  .el-upload-list__item {\r\n    width: 100% !important;\r\n    height: 300px !important;\r\n  }\r\n}\r\n.el-table .warning-row {\r\n  background: oldlace;\r\n}\r\n.el-table .success-row {\r\n  background: #f0f9eb;\r\n}\r\n\r\n.avatar-uploader {\r\n  /deep/.el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}