{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\editUersInformation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\Components\\components_Tabs\\editUersInformation.vue","mtime":1603967012990},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZWFjdGl2ZSwgcmVmLCBjb21wdXRlZCwgb25CZWZvcmVNb3VudCB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsNCmltcG9ydCB7IFVwZGF0YVVzZXJEYXRhIH0gZnJvbSAnQC9hcGkvdXNlci5qcyc7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdFZGl0X1RhYnMnLA0KICBzZXR1cChwcm9wcywgeyByb290LCBlbWl0IH0pIHsNCiAgICAvKi0tLS0tLS0tLS0tLS0tLS0t5Yid5aeL5YyW5pW45YC8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQogICAgY29uc3QgY2hhbmdlQWJsZSA9IHJlYWN0aXZlKFsnbmFtZScsICdwaG9uZU51bWJlciddKTsNCiAgICBjb25zdCBkaWFsb2dGb3JtVmlzaWJsZSA9IHJlZihmYWxzZSk7DQogICAgY29uc3QgZm9ybUxhYmVsV2lkdGggPSByZWYoJzEyMHB4Jyk7DQogICAgY29uc3QgRGF0YVRyYW5zZm9ybSA9IHJlYWN0aXZlKHsNCiAgICAgIG5hbWU6IHsNCiAgICAgICAgbGFiZWw6ICflp5PlkI0nDQogICAgICB9LA0KICAgICAgZ2VuZGVyOiB7DQogICAgICAgIGxhYmVsOiAn5oCnIOWIpScNCiAgICAgIH0sDQogICAgICBwaG9uZU51bWJlcjogew0KICAgICAgICBsYWJlbDogJ+mbuyDoqbEnDQogICAgICB9LA0KICAgICAgY2FyZE51bWJlcjogew0KICAgICAgICBsYWJlbDogJ+WNoSDomZ8nDQogICAgICB9LA0KICAgICAgbGV2ZWw6IHsNCiAgICAgICAgbGFiZWw6ICfnrYkg57SaJw0KICAgICAgfSwNCiAgICAgIGFtb3VudDogew0KICAgICAgICBsYWJlbDogJ+mHkSDpoY0nDQogICAgICB9LA0KICAgICAgbm90ZTogew0KICAgICAgICBsYWJlbDogJ+WCmSDoqLsnDQogICAgICB9DQogICAgfSk7DQogICAgLy8gKCDnjbLlj5bmlbjmk5rlrrnlmaggKQ0KICAgIGNvbnN0IHJlbmRlckRhdGEgPSByZWFjdGl2ZSh7DQogICAgICB0YWJsZToge30NCiAgICB9KTsNCiAgICBjb25zdCBkYXRhID0gY29tcHV0ZWQoKCkgPT4gew0KICAgICAgcmV0dXJuIHJvb3QuJHN0b3JlLnN0YXRlLnVzZXJEYXRhLnVzZXJGb3JtOw0KICAgIH0pOw0KICAgIC8qLS0tLS0tLS0tLS0tLS0t5Ye95pW4LS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovDQoNCiAgICBjb25zdCBnZXREYXRhID0gKCkgPT4gew0KICAgICAgY29uc29sZS5sb2cocm9vdC4kc3RvcmUuc3RhdGUudXNlckRhdGEudXNlckZvcm0pOw0KICAgICAgbGV0IGRhdGEgPSByb290LiRzdG9yZS5zdGF0ZS51c2VyRGF0YS51c2VyRm9ybTsNCiAgICAgIGZvciAobGV0IGtleSBpbiBkYXRhKSB7DQogICAgICAgIGlmIChEYXRhVHJhbnNmb3JtW2tleV0pIHsNCiAgICAgICAgICByb290LiRzZXQocmVuZGVyRGF0YS50YWJsZSwga2V5LCBkYXRhW2tleV0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCg0KICAgIC8vICgg5o+Q5Lqk5pW45pOaICkNCiAgICBjb25zdCBzdWJtaXRFZGl0ID0gKCkgPT4gew0KICAgICAgbGV0IHNlbmREYXRhID0gew0KICAgICAgICBuYW1lOiByZW5kZXJEYXRhLnRhYmxlLm5hbWUsDQogICAgICAgIHBob25lTnVtYmVyOiByZW5kZXJEYXRhLnRhYmxlLnBob25lTnVtYmVyLA0KICAgICAgICBub3RlOiByZW5kZXJEYXRhLnRhYmxlLm5vdGUNCiAgICAgIH07DQoNCiAgICAgIGxldCBvcmdpbmFsVXNlckRhdGEgPSByb290LiRzdG9yZS5zdGF0ZS51c2VyRGF0YS51c2VyRm9ybTsNCg0KICAgICAgbGV0IHJlc3VsdCA9IE9iamVjdC5rZXlzKHNlbmREYXRhKS5ldmVyeShpdGVtID0+IHsNCiAgICAgICAgcmV0dXJuIHNlbmREYXRhW2l0ZW1dID09IG9yZ2luYWxVc2VyRGF0YVtpdGVtXTsNCiAgICAgIH0pOw0KICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9IGVsc2Ugew0KICAgICAgICBzZW5kRWRpdFJlcXVlc3Qoc2VuZERhdGEpOw0KICAgICAgfQ0KICAgIH07DQoNCiAgICBjb25zdCBzZW5kRWRpdFJlcXVlc3QgPSBkYXRhID0+IHsNCiAgICAgIHJvb3QuJHN0b3JlDQogICAgICAgIC5kaXNwYXRjaCgndXNlckRhdGEvVVBEQVRFX1VTRVJfREFUQScsIGRhdGEpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICByb290LiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6ICfmiJDlip/kv67mlLkgISAnLA0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgfSk7DQogICAgICAgICAgZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICByZXR1cm4gew0KICAgICAgcmVuZGVyRGF0YSwNCiAgICAgIGdldERhdGEsDQogICAgICBjaGFuZ2VBYmxlLA0KICAgICAgRGF0YVRyYW5zZm9ybSwNCiAgICAgIHN1Ym1pdEVkaXQsDQogICAgICBkaWFsb2dGb3JtVmlzaWJsZSwNCiAgICAgIGZvcm1MYWJlbFdpZHRoLA0KICAgICAgZGF0YQ0KICAgIH07DQogIH0NCn07DQo="},{"version":3,"sources":["editUersInformation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"editUersInformation.vue","sourceRoot":"src/views/member/operation/Components/components_Tabs","sourcesContent":["<template>\r\n  <div id=\"edit-wrap\">\r\n    <el-dialog title=\"修改資料\" :visible.sync=\"dialogFormVisible\" @open=\"getData()\">\r\n      <el-form ref=\"form\" :model=\"renderData.table\" label-width=\"80px\">\r\n        <template v-for=\"(val, key, index) in renderData.table\">\r\n          <el-form-item\r\n            :key=\"index\"\r\n            v-if=\"DataTransform[key]\"\r\n            :label=\"DataTransform[key].label + ' :'\"\r\n          >\r\n            <template v-if=\"key === 'name' || key === 'phoneNumber'\">\r\n              <el-input v-model.trim=\"renderData.table[key]\" placeholder=\"请输入内容\" clearable>\r\n              </el-input>\r\n            </template>\r\n            <template v-else-if=\"key == 'note'\">\r\n              <el-input\r\n                v-model=\"renderData.table.note\"\r\n                type=\"textarea\"\r\n                placeholder=\"请输入内容\"\r\n                maxlength=\"100\"\r\n                show-word-limit\r\n              >\r\n              </el-input>\r\n            </template>\r\n            <template v-else>\r\n              <el-input :placeholder=\"val\" disabled></el-input>\r\n            </template>\r\n          </el-form-item>\r\n        </template>\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitEdit\">确 定</el-button>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, computed, onBeforeMount } from '@vue/composition-api';\r\nimport { UpdataUserData } from '@/api/user.js';\r\nexport default {\r\n  name: 'Edit_Tabs',\r\n  setup(props, { root, emit }) {\r\n    /*-----------------初始化數值----------------------*/\r\n    const changeAble = reactive(['name', 'phoneNumber']);\r\n    const dialogFormVisible = ref(false);\r\n    const formLabelWidth = ref('120px');\r\n    const DataTransform = reactive({\r\n      name: {\r\n        label: '姓名'\r\n      },\r\n      gender: {\r\n        label: '性 別'\r\n      },\r\n      phoneNumber: {\r\n        label: '電 話'\r\n      },\r\n      cardNumber: {\r\n        label: '卡 號'\r\n      },\r\n      level: {\r\n        label: '等 級'\r\n      },\r\n      amount: {\r\n        label: '金 額'\r\n      },\r\n      note: {\r\n        label: '備 註'\r\n      }\r\n    });\r\n    // ( 獲取數據容器 )\r\n    const renderData = reactive({\r\n      table: {}\r\n    });\r\n    const data = computed(() => {\r\n      return root.$store.state.userData.userForm;\r\n    });\r\n    /*---------------函數----------------------*/\r\n\r\n    const getData = () => {\r\n      console.log(root.$store.state.userData.userForm);\r\n      let data = root.$store.state.userData.userForm;\r\n      for (let key in data) {\r\n        if (DataTransform[key]) {\r\n          root.$set(renderData.table, key, data[key]);\r\n        }\r\n      }\r\n    };\r\n\r\n    // ( 提交數據 )\r\n    const submitEdit = () => {\r\n      let sendData = {\r\n        name: renderData.table.name,\r\n        phoneNumber: renderData.table.phoneNumber,\r\n        note: renderData.table.note\r\n      };\r\n\r\n      let orginalUserData = root.$store.state.userData.userForm;\r\n\r\n      let result = Object.keys(sendData).every(item => {\r\n        return sendData[item] == orginalUserData[item];\r\n      });\r\n      if (result) {\r\n        return;\r\n      } else {\r\n        sendEditRequest(sendData);\r\n      }\r\n    };\r\n\r\n    const sendEditRequest = data => {\r\n      root.$store\r\n        .dispatch('userData/UPDATE_USER_DATA', data)\r\n        .then(response => {\r\n          root.$message({\r\n            message: '成功修改 ! ',\r\n            type: 'success'\r\n          });\r\n          dialogFormVisible = false;\r\n        })\r\n        .catch(error => {\r\n          return false;\r\n        });\r\n    };\r\n\r\n    return {\r\n      renderData,\r\n      getData,\r\n      changeAble,\r\n      DataTransform,\r\n      submitEdit,\r\n      dialogFormVisible,\r\n      formLabelWidth,\r\n      data\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"]}]}