{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\history\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\history\\index.vue","mtime":1604273878859},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVGFibGVWdWUgZnJvbSAnQGMvVGFibGUnOw0KaW1wb3J0IHsgcmVmLCByZWFjdGl2ZSwgb25Nb3VudGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOw0KaW1wb3J0IHsgVXNlcnNIaXN0b3J5IH0gZnJvbSAnQC9hcGkvdXNlci5qcyc7DQppbXBvcnQgeyBpbml0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvaW5pdF9kYXRhJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnaGlzdG9yeScsDQogIGNvbXBvbmVudHM6IHsgVGFibGVWdWUgfSwNCiAgc2V0dXAocHJvcHMsIHsgcm9vdCB9KSB7DQogICAgLyotLS0tLS0tLS0tLS0tLS0tLeWIneWni+WMluaVuOWAvC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgIGNvbnN0IGRhdGUgPSByZWYoJycpOw0KICAgIGNvbnN0IGRpc2FibGVTZWFjaEJ0biA9IHJlZihmYWxzZSk7DQogICAgLy8oIOWIhumggSDmlbjmk5opDQogICAgY29uc3QgcGFnZXMgPSByZWFjdGl2ZSh7DQogICAgICB0b3RhbDogMCwNCiAgICAgIHBhZ2VzaXplOiAxMCwNCiAgICAgIGN1cnJlbnRQYWdlOiAxDQogICAgfSk7DQogICAgLy8oIOW+nuW+jOerr+W+l+WIsCDlhajpg6jmlbjmk5opDQogICAgY29uc3QgdG90YWxUYWJsZV9kYXRhID0gcmVhY3RpdmUoew0KICAgICAgaXRlbTogW10NCiAgICB9KTsNCiAgICAvLyAoIHRhYmxl57WE5Lu25pW45pOaICkNCiAgICBjb25zdCB0YWJsZV9kYXRhID0gcmVhY3RpdmUoew0KICAgICAgZXhwYW5kOiB0cnVlLA0KICAgICAgdEhlYWQ6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5pel5pyfJywNCiAgICAgICAgICBuYW1lOiAnZGF0ZScsDQogICAgICAgICAgd2lkdGg6ICczJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICflp5PlkI0nLA0KICAgICAgICAgIG5hbWU6ICduYW1lJywNCiAgICAgICAgICB3aWR0aDogJzEnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+mhnuWeiycsDQogICAgICAgICAgbmFtZTogJ3R5cGUnLA0KICAgICAgICAgIHdpZHRoOiAnMSAnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+mHkemhjScsDQogICAgICAgICAgbmFtZTogJ2Ftb3VudCcsDQogICAgICAgICAgd2lkdGg6ICcyICcNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIHRhYmxlRGF0YTogW10NCiAgICB9KTsNCg0KICAgIC8qLS0tLS0tLS0tLS0tLS0tLS3lh73mlbjogbLmmI4tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLw0KICAgIC8vICgg5b6M6Ie65pW45pOa6Iux6L2J5LitICkNCiAgICBjb25zdCBjaGlsZHJlbkRhdGEgPSByZWFjdGl2ZSh7DQogICAgICBoYWlyY3V0OiB7DQogICAgICAgIGxhYmVsOiAn5Ymq6auuJw0KICAgICAgfSwNCiAgICAgIGNvbG9yOiB7DQogICAgICAgIGxhYmVsOiAn5p+T6auuJw0KICAgICAgfSwNCiAgICAgIHBlcm06IHsNCiAgICAgICAgbGFiZWw6ICfnh5npq64nDQogICAgICB9LA0KICAgICAgdHJlYXRtZW50OiB7DQogICAgICAgIGxhYmVsOiAn6K2355CGJw0KICAgICAgfSwNCiAgICAgIG90aGVyczogew0KICAgICAgICBsYWJlbDogJ+WFtuS7licNCiAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vICgg5YiH5o+b6aCB5pW477yM5omL5YuV5YiG5Ymy5pW45pOaICkNCiAgICBjb25zdCBoYW5kQ3VycmVudENoYW5nZSA9IHZhbCA9PiB7DQogICAgICBwYWdlcy5jdXJyZW50UGFnZSA9IHZhbDsNCiAgICAgIGdldExpc3QodmFsLCBwYWdlcy5wYWdlc2l6ZSk7DQogICAgfTsNCiAgICAvLyAoIOWIh+aPm+mhr+ekuue4veaVuOmHj++8jOaJi+WLleWIhuWJsuaVuOaTmiApDQogICAgY29uc3QgaGFuZFNpemVDaGFuZ2UgPSB2YWwgPT4gew0KICAgICAgcGFnZXMucGFnZXNpemUgPSB2YWw7DQogICAgICBnZXRMaXN0KHBhZ2VzLmN1cnJlbnRQYWdlLCB2YWwpOw0KICAgICAgcGFnZXMuY3VycmVudFBhZ2UgPSAxOw0KICAgIH07DQogICAgLy8gKCDmkJzntKLoq4vmsYIgKQ0KICAgIGNvbnN0IHNlYXJjaFVzZXJzID0gKCkgPT4gew0KICAgICAgbGV0IGRhdGEgPSB7DQogICAgICAgIHN0YXJ0OiBkYXRlLnZhbHVlWzBdLA0KICAgICAgICBlbmQ6IGRhdGUudmFsdWVbMV0NCiAgICAgIH07DQogICAgICBnZXRBbGxVc2VySW5mbyhkYXRhKTsNCiAgICB9Ow0KICAgIC8vICgg6KuL5rGC5YWo6YOo5pW45pOaICkNCiAgICBjb25zdCBnZXRBbGxVc2VySW5mbyA9IGRhdGEgPT4gew0KICAgICAgbGV0IHNlbmREYXRhID0gZGF0YSB8fCBudWxsOw0KICANCiAgICAgIFVzZXJzSGlzdG9yeShzZW5kRGF0YSkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7DQogICAgICAgICAgdG90YWxUYWJsZV9kYXRhLml0ZW0gPSByZXNwb25zZS5kYXRhOw0KICAgICAgICAgIHBhZ2VzLnRvdGFsID0gdG90YWxUYWJsZV9kYXRhLml0ZW0ubGVuZ3RoOw0KICAgICAgICAgIGdldExpc3QocGFnZXMuY3VycmVudFBhZ2UsIHBhZ2VzLnBhZ2VzaXplKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgfSk7DQogICAgfTsNCiAgICBvbk1vdW50ZWQoKCkgPT4gew0KICAgICAgZ2V0QWxsVXNlckluZm8oKTsNCiAgICB9KTsNCiAgICAvLyAoIOaJi+WLleWIhuWJsue4veaVuOaTmiApDQogICAgY29uc3QgZ2V0TGlzdCA9IChjdXJyZW50LCBwYWdlU2l6ZSkgPT4gew0KICAgICAgbGV0IGRhdGEgPSB0b3RhbFRhYmxlX2RhdGEuaXRlbS5zbGljZSgoY3VycmVudCAtIDEpICogcGFnZVNpemUsIGN1cnJlbnQgKiBwYWdlU2l6ZSk7DQogICAgICB0YWJsZV9kYXRhLnRhYmxlRGF0YSA9IGRhdGE7DQogICAgfTsNCiAgICAvLyAoIOWIpOaWt3Jvd+aYr+WQpuacieWxlemWiyApDQogICAgY29uc3QgZ2V0Um93Q2xhc3NOYW1lID0gKHsgcm93LCByb3dJbmRleCB9KSA9PiB7DQogICAgICBpZiAocm93LmRldGFpbCA9PSAwKSB7DQogICAgICAgIHJldHVybiAncm93LWV4cGFuZC1jb3Zlcic7DQogICAgICB9DQogICAgfTsNCg0KICAgIHJldHVybiB7DQogICAgICB0b3RhbFRhYmxlX2RhdGEsDQogICAgICBoYW5kU2l6ZUNoYW5nZSwNCiAgICAgIGhhbmRDdXJyZW50Q2hhbmdlLA0KICAgICAgcGFnZXMsDQogICAgICB0YWJsZV9kYXRhLA0KICAgICAgZ2V0Um93Q2xhc3NOYW1lLA0KICAgICAgY2hpbGRyZW5EYXRhLA0KICAgICAgZGF0ZSwNCiAgICAgIHNlYXJjaFVzZXJzLA0KICAgICAgZGlzYWJsZVNlYWNoQnRuDQogICAgfTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/history","sourcesContent":["<template>\r\n  <div class=\"histroy_wrap\">\r\n    <!---------- 表格開始---------- -->\r\n    <TableVue :config=\"table_data\">\r\n      <el-date-picker\r\n        v-model=\"date\"\r\n        type=\"daterange\"\r\n        range-separator=\"至\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        value-format=\"yyyy-MM-dd\"\r\n      >\r\n      </el-date-picker>\r\n      <el-button\r\n        icon=\"el-icon-search\"\r\n        circle\r\n        :disabled=\"disableSeachBtn\"\r\n        @click=\"searchUsers\"\r\n      ></el-button>\r\n    </TableVue>\r\n    <!-- 底部分頁 -->\r\n    <div class=\"block\">\r\n      <el-pagination\r\n        background\r\n        @size-change=\"handSizeChange\"\r\n        @current-change=\"handCurrentChange\"\r\n        :current-page.sync=\"pages.currentPage\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"pages.total\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TableVue from '@c/Table';\r\nimport { ref, reactive, onMounted } from '@vue/composition-api';\r\nimport { UsersHistory } from '@/api/user.js';\r\nimport { initDate } from '@/utils/init_data';\r\n\r\nexport default {\r\n  name: 'history',\r\n  components: { TableVue },\r\n  setup(props, { root }) {\r\n    /*-----------------初始化數值----------------------*/\r\n    const date = ref('');\r\n    const disableSeachBtn = ref(false);\r\n    //( 分頁 數據)\r\n    const pages = reactive({\r\n      total: 0,\r\n      pagesize: 10,\r\n      currentPage: 1\r\n    });\r\n    //( 從後端得到 全部數據)\r\n    const totalTable_data = reactive({\r\n      item: []\r\n    });\r\n    // ( table組件數據 )\r\n    const table_data = reactive({\r\n      expand: true,\r\n      tHead: [\r\n        {\r\n          label: '日期',\r\n          name: 'date',\r\n          width: '3'\r\n        },\r\n        {\r\n          label: '姓名',\r\n          name: 'name',\r\n          width: '1'\r\n        },\r\n        {\r\n          label: '類型',\r\n          name: 'type',\r\n          width: '1 '\r\n        },\r\n        {\r\n          label: '金額',\r\n          name: 'amount',\r\n          width: '2 '\r\n        }\r\n      ],\r\n      tableData: []\r\n    });\r\n\r\n    /*-----------------函數聲明---------------------*/\r\n    // ( 後臺數據英轉中 )\r\n    const childrenData = reactive({\r\n      haircut: {\r\n        label: '剪髮'\r\n      },\r\n      color: {\r\n        label: '染髮'\r\n      },\r\n      perm: {\r\n        label: '燙髮'\r\n      },\r\n      treatment: {\r\n        label: '護理'\r\n      },\r\n      others: {\r\n        label: '其他'\r\n      }\r\n    });\r\n\r\n    // ( 切換頁數，手動分割數據 )\r\n    const handCurrentChange = val => {\r\n      pages.currentPage = val;\r\n      getList(val, pages.pagesize);\r\n    };\r\n    // ( 切換顯示總數量，手動分割數據 )\r\n    const handSizeChange = val => {\r\n      pages.pagesize = val;\r\n      getList(pages.currentPage, val);\r\n      pages.currentPage = 1;\r\n    };\r\n    // ( 搜索請求 )\r\n    const searchUsers = () => {\r\n      let data = {\r\n        start: date.value[0],\r\n        end: date.value[1]\r\n      };\r\n      getAllUserInfo(data);\r\n    };\r\n    // ( 請求全部數據 )\r\n    const getAllUserInfo = data => {\r\n      let sendData = data || null;\r\n  \r\n      UsersHistory(sendData)\r\n        .then(response => {\r\n              console.log(response);\r\n          totalTable_data.item = response.data;\r\n          pages.total = totalTable_data.item.length;\r\n          getList(pages.currentPage, pages.pagesize);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    };\r\n    onMounted(() => {\r\n      getAllUserInfo();\r\n    });\r\n    // ( 手動分割總數據 )\r\n    const getList = (current, pageSize) => {\r\n      let data = totalTable_data.item.slice((current - 1) * pageSize, current * pageSize);\r\n      table_data.tableData = data;\r\n    };\r\n    // ( 判斷row是否有展開 )\r\n    const getRowClassName = ({ row, rowIndex }) => {\r\n      if (row.detail == 0) {\r\n        return 'row-expand-cover';\r\n      }\r\n    };\r\n\r\n    return {\r\n      totalTable_data,\r\n      handSizeChange,\r\n      handCurrentChange,\r\n      pages,\r\n      table_data,\r\n      getRowClassName,\r\n      childrenData,\r\n      date,\r\n      searchUsers,\r\n      disableSeachBtn\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.row-expand-cover {\r\n  .el-table__expand-icon {\r\n    visibility: hidden !important;\r\n  }\r\n}\r\n.demo-table-expand {\r\n  font-size: 0;\r\n}\r\n.demo-table-expand label {\r\n  width: 90px;\r\n  color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n  margin-right: 0;\r\n  margin-bottom: 0;\r\n  width: 50%;\r\n}\r\n</style>\r\n"]}]}