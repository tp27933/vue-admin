{"remainingRequest":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\index.vue?vue&type=style&index=0&id=2aca3ccf&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\src\\views\\member\\operation\\index.vue","mtime":1603461833427},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\missj\\OneDrive\\桌面\\vue\\vue-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KcCB7DQogIHdpZHRoOiA1MCU7DQogIGhlaWdodDogMzBweDsNCiAgbGluZS1oZWlnaHQ6IDMwcHg7DQogIGZsb2F0OiBsZWZ0Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmOGY5Ow0KfQ0KDQpsaSB7DQogIHdpZHRoOiAxMDAlOw0KICBwYWRkaW5nOiA0cHg7DQogIG1hcmdpbi10b3A6IDEwcHg7DQp9DQoNCi5vcGVyYXRpb25fZm9ybSBsYWJlbCB7DQogIGZsb2F0OiBsZWZ0Ow0KICB3aWR0aDogMTAwcHg7DQp9DQojdXNlci13cmFwIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KI3VzZXItd3JhcCB7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5jZXMtc2VhcmNoIHsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQoucHJvZmlsZSB7DQogIGhlaWdodDogMTAwJTsNCn0NCi5wcm9maWxlOjphZnRlciB7DQogIGNvbnRlbnQ6ICcnOw0KICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOw0KICBoZWlnaHQ6IDEwMCU7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgd2lkdGg6IDA7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQoucHJvZmlsZSA+IGltZyB7DQogIG9iamVjdC1maXQ6IGZpbGw7DQogIHdpZHRoOiAyMDBweDsNCiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsNCiAgYm9yZGVyOiAxcHggc29saWQgI2Y3ZjdmNzsNCn0NCi5lbC1hdmF0YXIgew0KICB3aWR0aDogMjAwcHg7DQogIGhlaWdodDogMjAwcHg7DQp9DQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQgew0KICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgb3ZlcmZsb3c6IGhpZGRlbjsNCn0NCi5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZDpob3ZlciB7DQogIGJvcmRlci1jb2xvcjogIzQwOWVmZjsNCn0NCi5hdmF0YXItdXBsb2FkZXItaWNvbiB7DQogIGZvbnQtc2l6ZTogMjhweDsNCiAgY29sb3I6ICM4YzkzOWQ7DQogIHdpZHRoOiAxNzhweDsNCiAgaGVpZ2h0OiAxNzhweDsNCiAgbGluZS1oZWlnaHQ6IDE3OHB4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouYXZhdGFyIHsNCiAgd2lkdGg6IDE3OHB4Ow0KICBoZWlnaHQ6IDE3OHB4Ow0KICBkaXNwbGF5OiBibG9jazsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/member/operation","sourcesContent":["<template>\r\n  <div id=\"user-wrap\">\r\n    <el-row>\r\n      <el-col :span=\"20\">\r\n        <SearchVue :config=\"data.search_data.config\" :content=\"data.search_data.content\" ref=\"searchValue\" />\r\n      </el-col>\r\n      <el-col :span=\"4\">\r\n        <el-button type=\"primary\" @click=\"SearchUser\">查询</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!------ profile 頭像 ------>\r\n    <el-row style=\"height: 70%;\" :gutter=\"20\">\r\n      <el-col\r\n        :span=\"10\"\r\n        class=\"\r\n            profile\r\n            floatL\"\r\n      >\r\n        <img :src=\"imageUrl\" alt=\"\" />\r\n        <!------ Tabs 切換欄 ------>\r\n\r\n        <TabBar />\r\n      </el-col>\r\n      <!------ Form 表格 ------>\r\n      <el-col :span=\"14\">\r\n        <ul>\r\n          <li v-for=\"(val, key, index) in data.formData\" :key=\"index\" class=\"operation_form clearFix\">\r\n            <label> {{ data.DataTransform[key].label }}</label>\r\n            <p>{{ val }}</p>\r\n          </li>\r\n        </ul>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Search, GETPROFILE } from '@/api/user.js';\r\nimport TabBar from './Components/Tabs.vue';\r\nimport SearchVue from '@c/Search';\r\n\r\n//vue3.0 composition-api\r\nimport { reactive, ref, computed, watch } from '@vue/composition-api';\r\nexport default {\r\n  name: 'operation',\r\n  components: { TabBar, SearchVue },\r\n  setup(prop, { root, refs }) {\r\n    /*-----------------初始化數值----------------------*/\r\n    const searchValue = ref('');\r\n    // ( 新上傳頭貼地址 )\r\n    const imageUrl = ref('https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png');\r\n    const data = reactive({\r\n      inputValue: {},\r\n      // ( search模塊config )\r\n      search_data: {\r\n        config: {\r\n          model: '',\r\n          size: '',\r\n          labelWidth: ''\r\n        },\r\n        content: [\r\n          {\r\n            type: 'Input',\r\n            label: '搜索',\r\n            prop: 'search',\r\n            placeholder: '請輸入姓名...'\r\n          }\r\n        ]\r\n      },\r\n      // ( 表單數據 )\r\n      formData: {\r\n        name: '',\r\n        gender: '',\r\n        phoneNumber: '',\r\n        cardNumber: '',\r\n        level: '',\r\n        amount: '',\r\n        note: ''\r\n      },\r\n      // ( 表單數據英轉中 )\r\n      DataTransform: {\r\n        name: {\r\n          label: '姓名'\r\n        },\r\n        gender: {\r\n          label: '性 別'\r\n        },\r\n        phoneNumber: {\r\n          label: '電 話'\r\n        },\r\n        cardNumber: {\r\n          label: '卡 號'\r\n        },\r\n        level: {\r\n          label: '等 級'\r\n        },\r\n        amount: {\r\n          label: '金 額'\r\n        },\r\n        note: {\r\n          label: '備 註'\r\n        }\r\n      }\r\n    });\r\n    // ( 監聽Vuex的userForm,將後臺英文數據轉中文 )\r\n    const vuexData = computed({\r\n      get: () => {\r\n        for (let key in root.$store.state.userData.userForm) {\r\n          if (data.DataTransform[key]) {\r\n            root.$set(data.formData, key, root.$store.state.userData.userForm[key]);\r\n          }\r\n        }\r\n        return root.$store.state.userData.userForm;\r\n      }\r\n    });\r\n\r\n    /*-----------------函數聲明---------------------*/\r\n\r\n    const SearchUser = () => {\r\n      const value = refs.searchValue.valueInput;\r\n\r\n      if (value == '') {\r\n        root.$message.error('請輸入關鍵字');\r\n      }\r\n      searchValue.value = value;\r\n      checkUser(value);\r\n    };\r\n\r\n    const checkUser = value => {\r\n      Search(value).then(SearchResponse => {\r\n        if (SearchResponse.data === '') {\r\n          root.$message.error('查無此用戶，請再次輸入');\r\n          return;\r\n        }\r\n\r\n        GETPROFILE(value).then(response => {\r\n          // ( 後台數據用戶沒有頭像時默認圖片地址 )\r\n          if (response.data.byteLength === 0) {\r\n            SearchResponse.data.pic = 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png';\r\n          } else {\r\n            // ( 後台數據用戶有頭像時轉義 )\r\n            let img = 'data:image/png;base64,' + btoa(new Uint8Array(response.data).reduce((data, byte) => data + String.fromCharCode(byte), ''));\r\n            imageUrl.value = img;\r\n\r\n            for (let key in SearchResponse.data) {\r\n              if (data.DataTransform[key]) {\r\n                root.$set(data.formData, key, SearchResponse.data[key]);\r\n              }\r\n            }\r\n            root.$store.commit('userData/RENDER_USER', SearchResponse.data);\r\n            root.$store.commit('userData/SET_TABS_DISABLED', false);\r\n          }\r\n        });\r\n      });\r\n    };\r\n    return {\r\n      vuexData,\r\n      searchValue,\r\n      SearchUser,\r\n      data,\r\n      imageUrl\r\n    };\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\np {\r\n  width: 50%;\r\n  height: 30px;\r\n  line-height: 30px;\r\n  float: left;\r\n  background-color: #f5f8f9;\r\n}\r\n\r\nli {\r\n  width: 100%;\r\n  padding: 4px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.operation_form label {\r\n  float: left;\r\n  width: 100px;\r\n}\r\n#user-wrap {\r\n  text-align: center;\r\n}\r\n#user-wrap {\r\n  text-align: center;\r\n}\r\n.ces-search {\r\n  text-align: right;\r\n}\r\n.profile {\r\n  height: 100%;\r\n}\r\n.profile::after {\r\n  content: '';\r\n  vertical-align: middle;\r\n  height: 100%;\r\n  display: inline-block;\r\n  width: 0;\r\n  overflow: hidden;\r\n}\r\n.profile > img {\r\n  object-fit: fill;\r\n  width: 200px;\r\n  vertical-align: middle;\r\n  border: 1px solid #f7f7f7;\r\n}\r\n.el-avatar {\r\n  width: 200px;\r\n  height: 200px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>\r\n"]}]}